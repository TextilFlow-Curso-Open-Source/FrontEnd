import{a}from"./chunk-QHSPJAHQ.js";import{g as d,h as S}from"./chunk-2V72WRPO.js";import{Z as m,ca as h}from"./chunk-3V6P7TZ6.js";var w="basil",I=function(e){return e===3?"v3":e},P="https://js.stripe.com",R="".concat(P,"/").concat(w,"/stripe.js"),L=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,x=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,y="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",T=function(e){return L.test(e)||x.test(e)},U=function(){for(var e=document.querySelectorAll('script[src^="'.concat(P,'"]')),t=0;t<e.length;t++){var r=e[t];if(T(r.src))return r}return null},g=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(R).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},C=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})},s=null,p=null,l=null,H=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},A=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},V=function(e){return s!==null?s:(s=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(y),window.Stripe){t(window.Stripe);return}try{var n=U();if(n&&e)console.warn(y);else if(!n)n=g(e);else if(n&&l!==null&&p!==null){var o;n.removeEventListener("load",l),n.removeEventListener("error",p),(o=n.parentNode)===null||o===void 0||o.removeChild(n),n=g(e)}l=A(t,r),p=H(r),n.addEventListener("load",l),n.addEventListener("error",p)}catch(u){r(u);return}}),s.catch(function(t){return s=null,Promise.reject(t)}))},$=function(e,t,r){if(e===null)return null;var n=t[0],o=n.match(/^pk_test/),u=I(e.version),v=w;o&&u!==v&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(v,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var f=e.apply(void 0,t);return C(f,r),f},c,b=!1,E=function(){return c||(c=V(null).catch(function(e){return c=null,Promise.reject(e)}),c)};Promise.resolve().then(function(){return E()}).catch(function(i){b||console.warn(i)});var F=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];b=!0;var n=Date.now();return E().then(function(o){return $(o,t,n)})};var j=class i{constructor(e){this.http=e}baseUrl=a.serverBaseUrl;paymentPath=a.paymentEndpointPath;createPaymentIntent(e,t){let r=`${this.baseUrl}${this.paymentPath}/create-intent`,n={userId:e,subscriptionPlan:t},o={headers:this.getAuthHeaders()};return console.log("\u{1F504} Creating payment intent:",n),this.http.post(r,n,o)}getAuthHeaders(){let e=localStorage.getItem(a.tokenStorageKey);return e?new d({"Content-Type":"application/json",Authorization:`${a.tokenPrefix}${e}`}):new d({"Content-Type":"application/json"})}verifyPayment(e){let t=`${this.baseUrl}${this.paymentPath}/verify/${e}`,r={headers:this.getAuthHeaders()};return this.http.get(t,r)}static \u0275fac=function(t){return new(t||i)(h(S))};static \u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})};export{F as a,j as b};
