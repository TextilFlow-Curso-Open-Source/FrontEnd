import{a as $}from"./chunk-QJN4MAFU.js";import{f as Q}from"./chunk-7B7PG3YE.js";import{R as j,e as m,g as D,h as Y,k,l as G,m as W,n as V,o as H,q}from"./chunk-XXRYAUWQ.js";import{a as S,b as z}from"./chunk-OHDBUEZ2.js";import"./chunk-XZSHE36Q.js";import{C as F,x as B,z as T}from"./chunk-S4BAPOHJ.js";import{e as x,k as A,r as w,w as X}from"./chunk-Z3ABZYYA.js";import{g as L}from"./chunk-GNQ3TXIC.js";import{$b as d,Fb as s,Gb as o,Hb as c,Lb as y,Pb as h,Qb as E,Ya as M,_a as a,a as b,ac as g,bc as O,d as v,db as f,kb as R,la as _,lc as i,ma as I,mc as n,pb as C,wb as p,yb as U}from"./chunk-LJ6G2VOH.js";function Z(u,e){u&1&&(s(0,"div",9),c(1,"div",10),s(2,"p"),d(3),i(4,"translate"),o()()),u&2&&(a(3),g(n(4,1,"BUSINESSMAN_PROFILE.LOADING")))}function J(u,e){if(u&1&&(c(0,"img",44),i(1,"translate")),u&2){let t=E(2);p("src",t.previewUrl,M)("alt",n(1,2,"BUSINESSMAN_PROFILE.COMPANY_LOGO"))}}function ee(u,e){u&1&&(s(0,"div",45)(1,"span",15),d(2,"add_photo_alternate"),o(),s(3,"span"),d(4),i(5,"translate"),o()()),u&2&&(a(4),g(n(5,1,"BUSINESSMAN_PROFILE.UPLOAD_LOGO")))}function te(u,e){if(u&1){let t=y();s(0,"div",11)(1,"form",12),h("ngSubmit",function(){_(t);let l=E();return I(l.saveProfile())}),s(2,"div",13)(3,"h2",14)(4,"span",15),d(5,"business"),o(),d(6),i(7,"translate"),o(),s(8,"div",16)(9,"div",17)(10,"div",18),h("click",function(){_(t);let l=E();return I(l.triggerFileInput())}),C(11,J,2,4,"img",19)(12,ee,6,3,"div",20),o(),s(13,"div",21)(14,"input",22,0),h("change",function(l){_(t);let P=E();return I(P.onFileSelected(l))}),o()()(),s(16,"div",23)(17,"p")(18,"strong"),d(19),i(20,"translate"),o()(),s(21,"ul")(22,"li"),d(23),i(24,"translate"),o(),s(25,"li"),d(26),i(27,"translate"),o(),s(28,"li"),d(29),i(30,"translate"),o()()()()(),s(31,"div",13)(32,"h2",14)(33,"span",15),d(34,"domain"),o(),d(35),i(36,"translate"),o(),s(37,"div",24)(38,"div",25),c(39,"app-input",26),i(40,"translate"),i(41,"translate"),o(),s(42,"div",27),c(43,"app-input",28),i(44,"translate"),i(45,"translate"),o(),s(46,"div",27),c(47,"app-input",29),i(48,"translate"),i(49,"translate"),o(),s(50,"div",27),c(51,"app-input",30),i(52,"translate"),i(53,"translate"),o(),s(54,"div",27),c(55,"app-input",31),i(56,"translate"),i(57,"translate"),o(),s(58,"div",27),c(59,"app-input",32),i(60,"translate"),i(61,"translate"),o(),s(62,"div",25),c(63,"app-input",33),i(64,"translate"),i(65,"translate"),o(),s(66,"div",25),c(67,"app-input",34),i(68,"translate"),i(69,"translate"),o()()(),s(70,"div",13)(71,"h2",14)(72,"span",15),d(73,"person"),o(),d(74),i(75,"translate"),o(),s(76,"div",24)(77,"div",27),c(78,"app-input",35),i(79,"translate"),i(80,"translate"),o(),s(81,"div",27),c(82,"app-input",36),i(83,"translate"),i(84,"translate"),o(),s(85,"div",27),c(86,"app-input",37),i(87,"translate"),i(88,"translate"),o(),s(89,"div",27),c(90,"app-input",38),i(91,"translate"),i(92,"translate"),i(93,"translate"),o(),s(94,"div",25),c(95,"app-input",39),i(96,"translate"),i(97,"translate"),o(),s(98,"div",27),c(99,"app-input",40),i(100,"translate"),i(101,"translate"),o()()(),s(102,"div",41)(103,"app-button",42),i(104,"translate"),h("click",function(){_(t);let l=E();return I(l.goBack())}),o(),s(105,"app-button",43),i(106,"translate"),h("click",function(){_(t);let l=E();return I(l.saveProfile())}),o()()()()}if(u&2){let t,r=E();a(),p("formGroup",r.form),a(5),O(" ",n(7,72,"BUSINESSMAN_PROFILE.COMPANY_LOGO")," "),a(4),U("has-image",r.previewUrl),a(),p("ngIf",r.previewUrl),a(),p("ngIf",!r.previewUrl),a(7),O("",n(20,74,"BUSINESSMAN_PROFILE.RECOMMENDATIONS"),":"),a(4),g(n(24,76,"BUSINESSMAN_PROFILE.FORMAT_INFO")),a(3),g(n(27,78,"BUSINESSMAN_PROFILE.SIZE_INFO")),a(3),g(n(30,80,"BUSINESSMAN_PROFILE.RESOLUTION_INFO")),a(6),O(" ",n(36,82,"BUSINESSMAN_PROFILE.COMPANY_INFO")," "),a(4),p("label",n(40,84,"BUSINESSMAN_PROFILE.COMPANY_NAME"))("placeholder",n(41,86,"BUSINESSMAN_PROFILE.COMPANY_NAME_PLACEHOLDER"))("fullWidth",!0)("required",!0),a(4),p("label",n(44,88,"BUSINESSMAN_PROFILE.RUC"))("placeholder",n(45,90,"BUSINESSMAN_PROFILE.RUC_PLACEHOLDER"))("fullWidth",!0)("required",!0),a(4),p("label",n(48,92,"BUSINESSMAN_PROFILE.BUSINESS_TYPE"))("placeholder",n(49,94,"BUSINESSMAN_PROFILE.SELECT_TYPE"))("options",r.businessTypes)("fullWidth",!0)("required",!0),a(4),p("label",n(52,96,"BUSINESSMAN_PROFILE.INDUSTRY"))("placeholder",n(53,98,"BUSINESSMAN_PROFILE.SELECT_INDUSTRY"))("options",r.industries)("fullWidth",!0)("required",!0),a(4),p("label",n(56,100,"BUSINESSMAN_PROFILE.EMPLOYEE_COUNT"))("placeholder",n(57,102,"BUSINESSMAN_PROFILE.SELECT_RANGE"))("options",r.employeeRanges)("fullWidth",!0),a(4),p("label",n(60,104,"BUSINESSMAN_PROFILE.FOUNDING_YEAR"))("placeholder",n(61,106,"BUSINESSMAN_PROFILE.SELECT_YEAR"))("options",r.years)("fullWidth",!0),a(4),p("label",n(64,108,"BUSINESSMAN_PROFILE.WEBSITE"))("placeholder",n(65,110,"BUSINESSMAN_PROFILE.WEBSITE_PLACEHOLDER"))("fullWidth",!0),a(4),p("label",n(68,112,"BUSINESSMAN_PROFILE.DESCRIPTION"))("placeholder",n(69,114,"BUSINESSMAN_PROFILE.DESCRIPTION_PLACEHOLDER"))("fullWidth",!0),a(7),O(" ",n(75,116,"BUSINESSMAN_PROFILE.PERSONAL_INFO")," "),a(4),p("label",n(79,118,"BUSINESSMAN_PROFILE.FULL_NAME"))("placeholder",n(80,120,"BUSINESSMAN_PROFILE.FULL_NAME_PLACEHOLDER"))("fullWidth",!0)("required",!0),a(4),p("label",n(83,122,"BUSINESSMAN_PROFILE.EMAIL"))("placeholder",n(84,124,"BUSINESSMAN_PROFILE.EMAIL_PLACEHOLDER"))("fullWidth",!0)("required",!0),a(4),p("label",n(87,126,"BUSINESSMAN_PROFILE.COUNTRY"))("placeholder",n(88,128,"BUSINESSMAN_PROFILE.COUNTRY_PLACEHOLDER"))("options",r.countries)("fullWidth",!0)("required",!0),a(4),p("label",n(91,130,"BUSINESSMAN_PROFILE.CITY"))("placeholder",r.loadingCities?n(92,132,"BUSINESSMAN_PROFILE.LOADING_CITIES"):n(93,134,"BUSINESSMAN_PROFILE.CITY_PLACEHOLDER"))("options",r.cities)("fullWidth",!0)("required",!0)("disabled",r.loadingCities||!((t=r.form.get("country"))!=null&&t.value)),a(5),p("label",n(96,136,"BUSINESSMAN_PROFILE.ADDRESS"))("placeholder",n(97,138,"BUSINESSMAN_PROFILE.ADDRESS_PLACEHOLDER"))("fullWidth",!0),a(4),p("label",n(100,140,"BUSINESSMAN_PROFILE.PHONE"))("placeholder",n(101,142,"BUSINESSMAN_PROFILE.PHONE_PLACEHOLDER"))("fullWidth",!0),a(4),p("label",n(104,144,"BUSINESSMAN_PROFILE.CANCEL")),a(2),p("label",n(106,146,r.isEditMode?"BUSINESSMAN_PROFILE.UPDATE_PROFILE":"BUSINESSMAN_PROFILE.CREATE_PROFILE"))("loading",r.isSaving)}}var K=class u{constructor(e,t,r,l,P,N){this.fb=e;this.businessmanService=t;this.authService=r;this.router=l;this.translate=P;this.http=N}form;isLoading=!1;isSaving=!1;isEditMode=!1;currentUser=null;businessmanProfile=new S({});selectedFile=null;previewUrl="";logoUrl="";businessTypes=[];industries=[];employeeRanges=[];years=[];countries=[];cities=[];loadingCities=!1;notification={show:!1,message:"",type:"success"};ngOnInit(){this.loadCountries(),this.loadTranslatedLists(),this.initForm(),this.loadUserData()}loadCountries(){this.http.get("https://countriesnow.space/api/v0.1/countries").subscribe({next:e=>{e.data&&Array.isArray(e.data)&&(this.countries=e.data.map(t=>({label:t.country,value:t.country})))},error:e=>{console.error("Error al cargar pa\xEDses:",e)}})}loadCitiesByCountry(e){this.loadingCities=!0,this.http.post("https://countriesnow.space/api/v0.1/countries/cities",{country:e}).subscribe({next:t=>{this.loadingCities=!1,t.data&&Array.isArray(t.data)&&(this.cities=t.data.map(r=>({label:r,value:r})))},error:t=>{this.loadingCities=!1,console.error("Error al cargar ciudades:",t),this.cities=[]}})}initForm(){this.form=this.fb.group({companyName:["",m.required],ruc:["",[m.required,m.pattern(/^\d{11}$/)]],businessType:["",m.required],industry:["",m.required],employeeCount:[""],foundingYear:[new Date().getFullYear()],website:[""],description:[""],fullName:["",m.required],email:["",[m.required,m.email]],country:["",m.required],city:["",m.required],address:[""],phone:[""]}),this.form.get("country")?.valueChanges.subscribe(e=>{e?this.loadCitiesByCountry(e):this.cities=[],this.form.get("city")?.setValue("")})}loadTranslatedLists(){this.businessTypes=[{value:"MANUFACTURING",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.MANUFACTURING")},{value:"TEXTILE_DISTRIBUTION",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.TEXTILE_DISTRIBUTION")},{value:"FABRIC_WHOLESALE",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.FABRIC_WHOLESALE")},{value:"GARMENT_PRODUCTION",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.GARMENT_PRODUCTION")},{value:"FASHION_RETAIL",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.FASHION_RETAIL")},{value:"TEXTILE_IMPORT_EXPORT",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.TEXTILE_IMPORT_EXPORT")},{value:"COMMERCIAL_SERVICES",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.COMMERCIAL_SERVICES")},{value:"TECHNOLOGY",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.TECHNOLOGY")},{value:"OTHER",label:this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPES.OTHER")}],this.industries=[{value:"COTTON_FABRICS",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.COTTON_FABRICS")},{value:"SYNTHETIC_FABRICS",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.SYNTHETIC_FABRICS")},{value:"LUXURY_FABRICS",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.LUXURY_FABRICS")},{value:"INDUSTRIAL_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.INDUSTRIAL_TEXTILES")},{value:"HOME_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.HOME_TEXTILES")},{value:"FASHION_FABRICS",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.FASHION_FABRICS")},{value:"SPORTS_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.SPORTS_TEXTILES")},{value:"MEDICAL_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.MEDICAL_TEXTILES")},{value:"AUTOMOTIVE_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.AUTOMOTIVE_TEXTILES")},{value:"ECO_FRIENDLY_TEXTILES",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.ECO_FRIENDLY_TEXTILES")},{value:"OTHER",label:this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRIES.OTHER")}],this.employeeRanges=[{value:"1-10",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_1_TO_10")},{value:"11-50",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_11_TO_50")},{value:"51-200",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_51_TO_200")},{value:"201-500",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_201_TO_500")},{value:"501-1000",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_501_TO_1000")},{value:"1000+",label:this.translate.instant("BUSINESSMAN_PROFILE.EMPLOYEE_RANGES.RANGE_1000_PLUS")}];let e=new Date().getFullYear();this.years=[];for(let t=e;t>=1950;t--)this.years.push({value:t,label:t.toString()})}loadUserData(){if(this.isLoading=!0,this.currentUser=this.authService.getCurrentUser(),!this.currentUser){this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_ERROR"),"error"),this.router.navigate(["/login"]);return}this.loadBusinessmanProfile()}loadBusinessmanProfile(){this.businessmanService.getProfileById(this.currentUser.id).subscribe({next:e=>{if(e){this.businessmanProfile=new S(e),this.logoUrl=e.logo||"",this.previewUrl=this.logoUrl,this.isEditMode=!0,this.form.patchValue({companyName:e.companyName||"",ruc:e.ruc||"",businessType:e.businessType||"",industry:e.industry||"",employeeCount:e.employeeCount||"",foundingYear:e.foundingYear||new Date().getFullYear(),website:e.website||"",description:e.description||"",fullName:e.name||this.currentUser?.name||"",email:e.email||this.currentUser?.email||"",country:e.country||this.currentUser?.country||"",city:e.city||this.currentUser?.city||"",address:e.address||this.currentUser?.address||"",phone:e.phone||this.currentUser?.phone||""});let t=e.country||this.currentUser?.country;t&&this.loadCitiesByCountry(t)}else this.businessmanProfile=new S({id:this.currentUser.id,name:this.currentUser.name,email:this.currentUser.email,role:"businessman",country:this.currentUser.country,city:this.currentUser.city,address:this.currentUser.address,phone:this.currentUser.phone,foundingYear:new Date().getFullYear()}),this.isEditMode=!1,this.form.patchValue({fullName:this.currentUser?.name||"",email:this.currentUser?.email||"",country:this.currentUser?.country||"",city:this.currentUser?.city||"",address:this.currentUser?.address||"",phone:this.currentUser?.phone||""}),this.currentUser?.country&&this.loadCitiesByCountry(this.currentUser.country);this.isLoading=!1},error:e=>{console.error("Error al cargar perfil:",e),this.businessmanProfile=new S({id:this.currentUser.id,name:this.currentUser.name,email:this.currentUser.email,role:"businessman",country:this.currentUser.country,city:this.currentUser.city,address:this.currentUser.address,phone:this.currentUser.phone,foundingYear:new Date().getFullYear()}),this.form.patchValue({fullName:this.currentUser?.name||"",email:this.currentUser?.email||"",country:this.currentUser?.country||"",city:this.currentUser?.city||"",address:this.currentUser?.address||"",phone:this.currentUser?.phone||""}),this.currentUser?.country&&this.loadCitiesByCountry(this.currentUser.country),this.isEditMode=!1,this.isLoading=!1}})}triggerFileInput(){let e=document.querySelector('input[type="file"]');e&&e.click()}onFileSelected(e){let t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/")){this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.INVALID_IMAGE_TYPE"),"warning"),e.target.value="";return}if(t.size>5*1024*1024){this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.IMAGE_TOO_LARGE"),"warning"),e.target.value="";return}this.selectedFile=t;let r=new FileReader;r.onload=l=>{this.previewUrl=l.target.result},r.readAsDataURL(t),e.target.value=""}removeImage(){this.selectedFile=null,this.previewUrl="",this.logoUrl="",this.businessmanProfile.logo=""}uploadImage(){return v(this,null,function*(){return this.selectedFile?new Promise(e=>{setTimeout(()=>{let r=this.form.getRawValue().companyName||"Company",l=`https://via.placeholder.com/300x300/a68b6b/ffffff?text=${encodeURIComponent(r)}`;e(l)},1e3)}):this.logoUrl})}validateForm(){let e=this.form.getRawValue();if(!e.companyName?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.COMPANY_NAME_REQUIRED"),"warning"),!1;if(!e.ruc?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.RUC_REQUIRED"),"warning"),!1;if(!e.businessType?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.BUSINESS_TYPE_REQUIRED"),"warning"),!1;if(!e.industry?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.INDUSTRY_REQUIRED"),"warning"),!1;if(!e.fullName?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.FULL_NAME_REQUIRED"),"warning"),!1;if(!e.email?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.EMAIL_REQUIRED"),"warning"),!1;if(!e.country?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.COUNTRY_REQUIRED"),"warning"),!1;if(!e.city?.trim())return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.CITY_REQUIRED"),"warning"),!1;if(e.ruc&&!/^\d{11}$/.test(e.ruc))return this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.INVALID_RUC"),"warning"),!1;let t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email&&!t.test(e.email)?(this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.INVALID_EMAIL"),"warning"),!1):e.website&&!this.isValidUrl(e.website)?(this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.INVALID_WEBSITE"),"warning"),!1):!0}isValidUrl(e){try{return new URL(e.startsWith("http")?e:`https://${e}`),!0}catch{return!1}}saveProfile(){return v(this,null,function*(){if(!this.form.valid||!this.validateForm()||this.isSaving){this.form.markAllAsTouched();return}this.isSaving=!0;try{let e=this.form.getRawValue();this.businessmanProfile.companyName=e.companyName,this.businessmanProfile.ruc=e.ruc,this.businessmanProfile.businessType=e.businessType,this.businessmanProfile.industry=e.industry,this.businessmanProfile.employeeCount=e.employeeCount,this.businessmanProfile.foundingYear=e.foundingYear,this.businessmanProfile.website=e.website,this.businessmanProfile.description=e.description,this.businessmanProfile.name=e.fullName,this.businessmanProfile.email=e.email,this.businessmanProfile.country=e.country,this.businessmanProfile.city=e.city,this.businessmanProfile.address=e.address,this.businessmanProfile.phone=e.phone,this.selectedFile&&(this.businessmanProfile.logo=yield this.uploadImage()),this.isEditMode?this.businessmanService.updateProfile(this.businessmanProfile.id,this.businessmanProfile).subscribe({next:t=>{console.log("\u2705 Businessman profile updated:",t);let r={id:this.currentUser.id,name:e.fullName,email:e.email,country:e.country,city:e.city,address:e.address,phone:e.phone,password:this.currentUser.password,role:this.currentUser.role};this.authService.updateUser(this.currentUser.id,r).subscribe({next:l=>{console.log("\u2705 User data updated:",l),this.authService.setCurrentUser(l),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_UPDATED_SUCCESS"),"success"),this.businessmanProfile=new S(t),this.logoUrl=t.logo||"",this.selectedFile=null,this.isSaving=!1},error:l=>{console.error("\u274C Error updating user data:",l),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.USER_UPDATE_ERROR"),"warning"),this.businessmanProfile=new S(t),this.logoUrl=t.logo||"",this.selectedFile=null,this.isSaving=!1}})},error:t=>{console.error("\u274C Error updating businessman profile:",t),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}}):this.businessmanService.createProfile(this.currentUser.id).subscribe({next:t=>{let r=new S(b(b({},t),this.businessmanProfile));this.businessmanService.updateProfile(t.id,r).subscribe({next:l=>{console.log("\u2705 New businessman profile created:",l);let P={id:this.currentUser.id,name:e.fullName,email:e.email,country:e.country,city:e.city,address:e.address,phone:e.phone,password:this.currentUser.password,role:this.currentUser.role};this.authService.updateUser(this.currentUser.id,P).subscribe({next:N=>{console.log("\u2705 User data updated:",N),this.authService.setCurrentUser(N),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_CREATED_SUCCESS"),"success"),this.businessmanProfile=new S(l),this.logoUrl=l.logo||"",this.selectedFile=null,this.isEditMode=!0,this.isSaving=!1},error:N=>{console.error("\u274C Error updating user data:",N),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.USER_UPDATE_ERROR"),"warning"),this.businessmanProfile=new S(l),this.logoUrl=l.logo||"",this.selectedFile=null,this.isEditMode=!0,this.isSaving=!1}})},error:l=>{console.error("\u274C Error completing businessman profile:",l),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})},error:t=>{console.error("\u274C Error creating businessman profile:",t),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})}catch(e){console.error("\u274C Error processing profile:",e),this.showNotification(this.translate.instant("BUSINESSMAN_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})}goBack(){this.router.navigate(["/businessman"])}showNotification(e,t){this.notification={show:!0,message:e,type:t}}closeNotification(){this.notification.show=!1}static \u0275fac=function(t){return new(t||u)(f(H),f(z),f(X),f(w),f(B),f(L))};static \u0275cmp=R({type:u,selectors:[["app-businessman-profile-configuration"]],decls:14,vars:15,consts:[["fileInput",""],[1,"profile-container"],[1,"profile-header"],[1,"header-content"],["variant","secondary","size","small",3,"click","label"],[1,"header-subtitle"],["class","loading-container",4,"ngIf"],["class","profile-form-container",4,"ngIf"],[3,"close","show","message","type","autoClose"],[1,"loading-container"],[1,"loading-spinner"],[1,"profile-form-container"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"material-icons"],[1,"logo-upload-section"],[1,"logo-preview"],[1,"logo-container",3,"click"],["class","logo-image",3,"src","alt",4,"ngIf"],["class","logo-placeholder",4,"ngIf"],[1,"logo-actions"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"upload-instructions"],[1,"form-grid"],[1,"form-group","full-width"],["type","text","formControlName","companyName",3,"label","placeholder","fullWidth","required"],[1,"form-group"],["type","text","formControlName","ruc",3,"label","placeholder","fullWidth","required"],["type","select","formControlName","businessType",3,"label","placeholder","options","fullWidth","required"],["type","select","formControlName","industry",3,"label","placeholder","options","fullWidth","required"],["type","select","formControlName","employeeCount",3,"label","placeholder","options","fullWidth"],["type","select","formControlName","foundingYear",3,"label","placeholder","options","fullWidth"],["type","url","formControlName","website",3,"label","placeholder","fullWidth"],["type","textarea","formControlName","description",3,"label","placeholder","fullWidth"],["type","text","formControlName","fullName",3,"label","placeholder","fullWidth","required"],["type","email","formControlName","email",3,"label","placeholder","fullWidth","required"],["type","select","formControlName","country",3,"label","placeholder","options","fullWidth","required"],["type","select","formControlName","city",3,"label","placeholder","options","fullWidth","required","disabled"],["type","text","formControlName","address",3,"label","placeholder","fullWidth"],["type","tel","formControlName","phone",3,"label","placeholder","fullWidth"],[1,"form-actions"],["type","button","variant","secondary",3,"click","label"],["type","button","variant","primary","icon","save",3,"click","label","loading"],[1,"logo-image",3,"src","alt"],[1,"logo-placeholder"]],template:function(t,r){t&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-button",4),i(4,"translate"),h("click",function(){return r.goBack()}),o(),s(5,"h1"),d(6),i(7,"translate"),o(),s(8,"p",5),d(9),i(10,"translate"),o()()(),C(11,Z,5,3,"div",6)(12,te,107,148,"div",7),s(13,"app-notification",8),h("close",function(){return r.closeNotification()}),o()()),t&2&&(a(3),p("label",n(4,9,"BUSINESSMAN_PROFILE.GO_BACK")),a(3),g(n(7,11,r.isEditMode?"BUSINESSMAN_PROFILE.EDIT_TITLE":"BUSINESSMAN_PROFILE.CREATE_TITLE")),a(3),g(n(10,13,"BUSINESSMAN_PROFILE.SUBTITLE")),a(2),p("ngIf",r.isLoading),a(),p("ngIf",!r.isLoading),a(),p("show",r.notification.show)("message",r.notification.message)("type",r.notification.type)("autoClose",!0))},dependencies:[A,x,q,k,D,Y,V,G,W,Q,j,$,F,T],styles:['[_ngcontent-%COMP%]:root{--primary-color: #a68b6b;--primary-dark: #8b7355;--primary-light: rgba(166, 139, 107, .1);--background-color: #f8f9fa;--surface-color: #ffffff;--text-dark: #2c3e50;--text-light: #6c757d;--text-muted: #9ca3af;--border-color: #e0e6ed;--border-light: #f1f3f4;--success-color: #10b981;--warning-color: #f59e0b;--danger-color: #ef4444;--shadow-sm: 0 2px 4px rgba(0, 0, 0, .06);--shadow-md: 0 4px 12px rgba(0, 0, 0, .08);--shadow-lg: 0 8px 25px rgba(0, 0, 0, .12);--border-radius: 12px;--border-radius-sm: 8px;--transition: all .3s cubic-bezier(.4, 0, .2, 1)}.profile-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--background-color) 0%,#f1f5f9 100%);padding:24px}.profile-header[_ngcontent-%COMP%]{background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);margin-bottom:24px;overflow:hidden;position:relative}.profile-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-color),var(--primary-dark))}.header-content[_ngcontent-%COMP%]{padding:32px;display:flex;flex-direction:column;gap:8px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;color:var(--text-dark);line-height:1.2}.header-subtitle[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--text-light);font-weight:400}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--border-color);border-top:4px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-light);font-size:16px}.profile-form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.form-section[_ngcontent-%COMP%]{background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);padding:32px;border:1px solid var(--border-color);transition:var(--transition)}.form-section[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg);transform:translateY(-2px)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 24px;font-size:20px;font-weight:600;color:var(--text-dark);padding-bottom:16px;border-bottom:2px solid var(--border-light)}.section-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color)}.logo-upload-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:40px;align-items:center}.logo-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.logo-container[_ngcontent-%COMP%]{width:200px;height:200px;border:3px dashed var(--border-color);border-radius:var(--border-radius);display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--background-color);transition:var(--transition);position:relative;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.logo-container[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:var(--primary-light);transform:scale(1.03);box-shadow:var(--shadow-md)}.logo-container[_ngcontent-%COMP%]:active{transform:scale(.98)}.logo-container.has-image[_ngcontent-%COMP%]{border-style:solid;border-color:var(--primary-color);background:transparent;box-shadow:var(--shadow-sm)}.logo-container.has-image[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg);border-color:var(--primary-dark)}.logo-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:calc(var(--border-radius) - 3px);transition:var(--transition)}.logo-container.has-image[_ngcontent-%COMP%]:hover   .logo-image[_ngcontent-%COMP%]{transform:scale(1.02)}.logo-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:var(--text-muted);text-align:center;padding:20px;pointer-events:none;transition:var(--transition)}.logo-container[_ngcontent-%COMP%]:hover   .logo-placeholder[_ngcontent-%COMP%]{color:var(--primary-color);transform:translateY(-2px)}.logo-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:56px;opacity:.6;transition:var(--transition)}.logo-container[_ngcontent-%COMP%]:hover   .logo-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:600;letter-spacing:.5px}.logo-hint[_ngcontent-%COMP%]{font-size:14px;color:var(--text-light);text-align:center;font-style:italic;margin-top:8px;opacity:.8}input[type=file][_ngcontent-%COMP%]{display:none!important;visibility:hidden!important;position:absolute!important;left:-9999px!important}.upload-instructions[_ngcontent-%COMP%]{background:var(--primary-light);padding:24px;border-radius:var(--border-radius-sm);border-left:4px solid var(--primary-color);max-width:400px}.upload-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:600;color:var(--text-dark);font-size:16px}.upload-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:var(--text-light);list-style-type:none;position:relative}.upload-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px;padding-left:20px;position:relative;line-height:1.4}.upload-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";position:absolute;left:0;color:var(--primary-color);font-weight:700;font-size:12px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-dark);margin-bottom:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;padding:24px 32px;background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);border:1px solid var(--border-color);margin-top:8px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:16px}.header-content[_ngcontent-%COMP%]{padding:24px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-section[_ngcontent-%COMP%]{padding:24px}.section-title[_ngcontent-%COMP%]{font-size:18px}.logo-upload-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:24px;text-align:center}.logo-container[_ngcontent-%COMP%]{width:180px;height:180px;margin:0 auto}.upload-instructions[_ngcontent-%COMP%]{max-width:none;text-align:left}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}}@media (max-width: 480px){.profile-container[_ngcontent-%COMP%]{padding:12px}.header-content[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{padding:20px}.logo-container[_ngcontent-%COMP%]{width:150px;height:150px}.logo-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:42px}.logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.section-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.upload-instructions[_ngcontent-%COMP%]{padding:20px}}[data-theme=dark][_ngcontent-%COMP%]{--background-color: #1a1a1a;--surface-color: #2d2d2d;--text-dark: #ffffff;--text-light: #b3b3b3;--text-muted: #888888;--border-color: #404040;--border-light: #505050}[data-theme=dark][_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,var(--primary-color),var(--primary-dark))}[data-theme=dark][_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{background:#333;border-color:var(--border-color)}[data-theme=dark][_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]:hover{background:#a68b6b26;border-color:var(--primary-color)}[data-theme=dark][_ngcontent-%COMP%]   .upload-instructions[_ngcontent-%COMP%]{background:#a68b6b1a;border-left-color:var(--primary-color)}.form-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #a68b6b66}70%{box-shadow:0 0 0 10px #a68b6b00}to{box-shadow:0 0 #a68b6b00}}.logo-container[_ngcontent-%COMP%]:not(.has-image):hover{animation:_ngcontent-%COMP%_pulse 1.5s ease-out}.logo-container[_ngcontent-%COMP%]:focus-within{outline:3px solid var(--primary-color);outline-offset:3px}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}.logo-container[_ngcontent-%COMP%]:hover{transform:none!important}}.logo-container[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-3px;border:3px solid transparent;border-radius:var(--border-radius);transition:var(--transition);pointer-events:none}.logo-container[_ngcontent-%COMP%]:hover:after{border-color:var(--primary-color);opacity:.3}']})};export{K as BusinessmanProfileConfigurationComponent};
