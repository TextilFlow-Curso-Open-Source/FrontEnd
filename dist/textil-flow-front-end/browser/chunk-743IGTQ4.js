import{a as Z,b as J}from"./chunk-6NA33S6E.js";import{b as q}from"./chunk-ICUDU4DM.js";import{a as X}from"./chunk-JGNPUBHB.js";import{S as Q,c as D,e as y,g as z,h as U,k as V,l as G,m as Y,p as H,r as j}from"./chunk-3QVQVNEG.js";import"./chunk-ZM53J4V7.js";import{b as W}from"./chunk-GG34XMCG.js";import{d as I,e as A,l as T,s as R,v as F}from"./chunk-6CUNOLLP.js";import{C as k,x as B,z as L}from"./chunk-PY2MZTIA.js";import{a as $}from"./chunk-QHSPJAHQ.js";import"./chunk-2V72WRPO.js";import{$a as o,Ab as M,Hb as n,Ib as i,Jb as h,Nb as v,Rb as u,Sb as g,bc as r,cc as m,d as S,dc as x,eb as b,ec as E,la as f,lb as N,ma as P,na as O,nc as l,oa as w,oc as c,qb as C,yb as d}from"./chunk-3V6P7TZ6.js";function ee(s,e){if(s&1){let t=v();n(0,"div",7)(1,"div",8)(2,"div",9),O(),n(3,"svg",10),h(4,"path",11),i()(),w(),n(5,"h2",12),r(6,"\xA1Bienvenido a TextilFlow!"),i(),n(7,"p",13),r(8," Para comenzar a gestionar tus procesos textiles, selecciona el plan que mejor se adapte a tus necesidades y act\xEDvalo. "),i(),n(9,"div",14)(10,"p",15),r(11,"Plan seleccionado:"),i(),n(12,"div",16)(13,"span",17),r(14),i(),n(15,"span",18),r(16),i()()(),n(17,"button",19),u("click",function(){f(t);let p=g();return P(p.proceedToPayment())}),O(),n(18,"svg",20),h(19,"path",21),i(),w(),n(20,"span"),r(21,"Proceder al Pago"),i()(),n(22,"p",22),r(23," Puedes cambiar de plan en cualquier momento desde tu configuraci\xF3n "),i()()()}if(s&2){let t=g();o(14),x(" ",t.selectedPlanForPayment==="basic"?"B\xE1sico":"Corporativo"," "),o(2),x(" $",t.selectedPlanForPayment==="basic"?"9.99":"49.99","/mes ")}}function te(s,e){s&1&&(n(0,"div",23),h(1,"div",24),n(2,"p"),r(3),l(4,"translate"),i()()),s&2&&(o(3),m(c(4,1,"COMMON.LOADING")))}function ne(s,e){s&1&&(n(0,"div",43),r(1),l(2,"translate"),i()),s&2&&(o(),x(" ",c(2,1,"PLANS.CURRENT")," "))}function ie(s,e){s&1&&(n(0,"div",44),r(1," SELECCIONADO "),i())}function oe(s,e){if(s&1&&(n(0,"li",45)(1,"span",46),r(2,"\u2713"),i(),n(3,"span",47),r(4),l(5,"translate"),i()()),s&2){let t=e.$implicit;o(4),m(c(5,1,t.key))}}function re(s,e){if(s&1&&(n(0,"span"),r(1),i()),s&2){let t=g().$implicit,a=g(2);o(),x(" ",t.id===a.selectedPlanForPayment?"SELECCIONADO":"SELECCIONAR ESTE PLAN"," ")}}function ae(s,e){if(s&1&&(n(0,"span"),r(1),l(2,"translate"),i()),s&2){let t=g().$implicit;o(),x(" ",c(2,1,t.buttonText)," ")}}function se(s,e){s&1&&(O(),n(0,"svg",48),h(1,"path",49),i())}function le(s,e){if(s&1){let t=v();n(0,"div",29),C(1,ne,3,3,"div",30)(2,ie,2,0,"div",31),n(3,"div",32)(4,"h3"),r(5),l(6,"translate"),i(),n(7,"div",33)(8,"span",34),r(9,"$"),i(),n(10,"span",35),r(11),i(),n(12,"span",36),r(13),l(14,"translate"),i()()(),n(15,"div",37)(16,"ul"),C(17,oe,6,3,"li",38),i()(),n(18,"div",39)(19,"button",40),u("click",function(){let p=f(t).$implicit,_=g(2);return P(_.onPlanAction(p.id))}),C(20,re,2,1,"span",41)(21,ae,3,3,"span",41)(22,se,2,0,"svg",42),i()()()}if(s&2){let t=e.$implicit,a=g(2);M("current-plan",t.isCurrentPlan)("plan-basic",t.id==="basic")("plan-corporate",t.id==="corporate"),o(),d("ngIf",t.isCurrentPlan&&!a.showPlanSelectionBanner),o(),d("ngIf",a.showPlanSelectionBanner&&t.id===a.selectedPlanForPayment),o(3),m(c(6,22,t.name)),o(6),m(t.price),o(2),m(c(14,24,t.period)),o(4),d("ngForOf",t.features),o(2),M("plan-button-basic",t.id==="basic")("plan-button-corporate",t.id==="corporate")("plan-button-selected",a.showPlanSelectionBanner&&t.id===a.selectedPlanForPayment),d("disabled",t.isCurrentPlan&&!a.showPlanSelectionBanner),o(),d("ngIf",a.showPlanSelectionBanner),o(),d("ngIf",!a.showPlanSelectionBanner),o(),d("ngIf",a.showPlanSelectionBanner&&t.id===a.selectedPlanForPayment)}}function ce(s,e){if(s&1&&(n(0,"div",25)(1,"div",26)(2,"h1"),r(3),l(4,"translate"),i(),n(5,"p"),r(6),l(7,"translate"),i()(),n(8,"div",27),C(9,le,23,26,"div",28),i()()),s&2){let t=g();o(3),m(c(4,3,"PLANS.TITLE")),o(3),m(c(7,5,"PLANS.SUBTITLE")),o(3),d("ngForOf",t.plans)}}function pe(s,e){if(s&1){let t=v();n(0,"div",50),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),n(1,"div",51),u("click",function(p){return f(t),P(p.stopPropagation())}),n(2,"div",52)(3,"h3"),r(4),l(5,"translate"),i(),n(6,"button",53),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),r(7,"\xD7"),i()(),n(8,"div",54)(9,"p"),r(10),l(11,"translate"),i(),n(12,"div",55)(13,"div",56)(14,"span"),r(15),l(16,"translate"),i(),n(17,"strong"),r(18),l(19,"translate"),i()()()(),n(20,"div",57)(21,"app-button",58),l(22,"translate"),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),i(),n(23,"app-button",59),l(24,"translate"),u("click",function(){f(t);let p=g();return P(p.confirmUpgrade())}),i()()()()}if(s&2){let t,a=g();o(4),m(c(5,7,"PLANS.CONFIRM_UPGRADE")),o(6),m(c(11,9,"PLANS.UPGRADE_DESCRIPTION")),o(5),x("",c(16,11,"PLANS.NEW_PRICE"),":"),o(3),E("$",(t=a.getTargetPlan())==null?null:t.price,"/",c(19,13,"PLANS.MONTH"),""),o(3),d("label",c(22,15,"COMMON.CANCEL")),o(2),d("label",c(24,17,"PLANS.PROCEED_PAYMENT"))}}function de(s,e){if(s&1){let t=v();n(0,"div",50),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),n(1,"div",51),u("click",function(p){return f(t),P(p.stopPropagation())}),n(2,"div",52)(3,"h3"),r(4),l(5,"translate"),i(),n(6,"button",53),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),r(7,"\xD7"),i()(),n(8,"div",54)(9,"p"),r(10),l(11,"translate"),i(),n(12,"div",60)(13,"p")(14,"strong"),r(15),l(16,"translate"),i()(),n(17,"ul")(18,"li"),r(19),l(20,"translate"),i(),n(21,"li"),r(22),l(23,"translate"),i(),n(24,"li"),r(25),l(26,"translate"),i()()()(),n(27,"div",57)(28,"app-button",58),l(29,"translate"),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),i(),n(30,"app-button",59),l(31,"translate"),u("click",function(){f(t);let p=g();return P(p.confirmDowngrade())}),i()()()()}s&2&&(o(4),m(c(5,8,"PLANS.CONFIRM_DOWNGRADE")),o(6),m(c(11,10,"PLANS.DOWNGRADE_WARNING")),o(5),x("",c(16,12,"PLANS.YOU_WILL_LOSE"),":"),o(4),m(c(20,14,"PLANS.FEATURE_PERSONALIZED_DASHBOARD")),o(3),m(c(23,16,"PLANS.FEATURE_UNLIMITED_PHOTOS")),o(3),m(c(26,18,"PLANS.FEATURE_QUALITY_PDF_REPORTS")),o(3),d("label",c(29,20,"COMMON.CANCEL")),o(2),d("label",c(31,22,"PLANS.CONFIRM_DOWNGRADE")))}function me(s,e){s&1&&(n(0,"div",93),h(1,"div",94),n(2,"h4"),r(3),l(4,"translate"),i(),n(5,"p"),r(6),l(7,"translate"),i(),n(8,"p",95),r(9),l(10,"translate"),i()()),s&2&&(o(3),m(c(4,3,"PLANS.PROCESSING_PAYMENT")),o(3),m(c(7,5,"PLANS.PLEASE_WAIT")),o(3),m(c(10,7,"PLANS.DO_NOT_CLOSE")))}function ge(s,e){s&1&&(n(0,"div",96)(1,"div",97),r(2,"\u2713"),i(),n(3,"h4"),r(4),l(5,"translate"),i(),n(6,"p"),r(7),l(8,"translate"),i()()),s&2&&(o(4),m(c(5,2,"PLANS.PAYMENT_SUCCESS")),o(3),m(c(8,4,"PLANS.PLAN_ACTIVATED")))}function ue(s,e){if(s&1){let t=v();n(0,"div",61)(1,"div",62),u("click",function(p){return f(t),P(p.stopPropagation())}),n(2,"div",52)(3,"h3"),r(4),l(5,"translate"),i(),n(6,"button",53),u("click",function(){f(t);let p=g();return P(p.cancelModal())}),r(7,"\xD7"),i()(),n(8,"div",63)(9,"form",64)(10,"div",65)(11,"div",66)(12,"h4"),r(13),l(14,"translate"),i()(),n(15,"div",67)(16,"div",68)(17,"span",69),r(18),l(19,"translate"),l(20,"translate"),i(),n(21,"span",70),r(22),i()(),n(23,"div",71),r(24),l(25,"translate"),i()()(),n(26,"div",72)(27,"h4",73),r(28),l(29,"translate"),i(),n(30,"div",74)(31,"label",75),r(32),l(33,"translate"),i(),h(34,"div",76)(35,"div",77),i(),n(36,"div",74)(37,"label",75),r(38),l(39,"translate"),i(),h(40,"input",78),i()(),n(41,"div",72)(42,"h4",73),r(43),l(44,"translate"),i(),n(45,"div",74)(46,"label",75),r(47),l(48,"translate"),i(),h(49,"input",79),i(),n(50,"div",80)(51,"div",74)(52,"label",75),r(53),l(54,"translate"),i(),h(55,"input",81),i(),n(56,"div",74)(57,"label",75),r(58),l(59,"translate"),i(),h(60,"input",82),i()(),n(61,"div",74)(62,"label",75),r(63),l(64,"translate"),i(),h(65,"input",83),i()(),n(66,"div",84)(67,"div",85),r(68,"\u{1F512}"),i(),n(69,"div",86)(70,"span",87),r(71),l(72,"translate"),i(),n(73,"span",88),r(74),l(75,"translate"),i()()(),n(76,"div",89)(77,"button",90),u("click",function(){f(t);let p=g();return P(p.processPayment())}),r(78),l(79,"translate"),i()()(),C(80,me,11,9,"div",91)(81,ge,9,6,"div",92),i()()()}if(s&2){let t=g();o(4),m(c(5,28,"PLANS.COMPLETE_PAYMENT")),o(5),M("form-hidden",t.paymentSuccess||t.isProcessingPayment),d("formGroup",t.paymentForm),o(4),m(c(14,30,"PLANS.ORDER_SUMMARY")),o(5),x(" ",t.selectedPlanForPayment==="basic"?c(19,32,"PLANS.BASIC_PLAN"):c(20,34,"PLANS.CORPORATE_PLAN")," "),o(4),x(" $",t.selectedPlanForPayment==="basic"?"9.99":"49.99"," "),o(2),m(c(25,36,"PLANS.PER_MONTH")),o(4),m(c(29,38,"PLANS.PAYMENT_METHOD")),o(4),m(c(33,40,"PLANS.CARD_DETAILS")),o(6),x("",c(39,42,"PLANS.CARD_HOLDER")," *"),o(2),d("disabled",t.isProcessingPayment),o(3),m(c(44,44,"PLANS.BILLING_INFO")),o(4),x("",c(48,46,"PLANS.BILLING_ADDRESS")," *"),o(2),d("disabled",t.isProcessingPayment),o(4),x("",c(54,48,"PLANS.BILLING_CITY")," *"),o(2),d("disabled",t.isProcessingPayment),o(3),x("",c(59,50,"PLANS.BILLING_COUNTRY")," *"),o(2),d("disabled",t.isProcessingPayment),o(3),x("",c(64,52,"PLANS.BILLING_PHONE")," *"),o(2),d("disabled",t.isProcessingPayment),o(6),m(c(72,54,"PLANS.SECURE_PAYMENT")),o(3),m(c(75,56,"PLANS.ENCRYPTED_PROTECTED")),o(3),d("disabled",t.isProcessingPayment||!t.stripeElementReady||!t.paymentForm.valid),o(),E(" ",c(79,58,"PLANS.PAY_NOW")," $",t.selectedPlanForPayment==="basic"?"9.99":"49.99"," "),o(2),d("ngIf",t.isProcessingPayment&&!t.paymentSuccess),o(),d("ngIf",t.paymentSuccess)}}var K=class s{constructor(e,t,a,p,_,fe){this.configurationService=e;this.paymentService=t;this.authService=a;this.fb=p;this.translateService=_;this.router=fe;this.initPaymentForm(),this.initStripe()}currentUserId="";configuration=null;currentPlan="basic";isLoading=!1;showUpgradeModal=!1;showDowngradeModal=!1;showPaymentModal=!1;isProcessingPayment=!1;paymentSuccess=!1;showPlanSelectionBanner=!1;selectedPlanForPayment="basic";isFirstTimeUser=!1;stripe=null;elements=null;cardElement=null;stripeLoaded=!1;stripeElementReady=!1;paymentForm;notification={show:!1,message:"",type:"success"};plans=[{id:"basic",name:"PLANS.BASIC_PLAN",price:9.99,period:"PLANS.PER_MONTH",features:[{key:"PLANS.FEATURE_REGISTER_10_BATCHES"},{key:"PLANS.FEATURE_UPLOAD_20_PHOTOS"},{key:"PLANS.FEATURE_4_PDF_REPORTS"}],buttonText:"PLANS.CHANGE",buttonVariant:"secondary",isCurrentPlan:!1},{id:"corporate",name:"PLANS.CORPORATE_PLAN",price:49.99,period:"PLANS.PER_MONTH",features:[{key:"PLANS.FEATURE_UNLIMITED_REGISTER"},{key:"PLANS.FEATURE_PERSONALIZED_DASHBOARD"},{key:"PLANS.FEATURE_100_MONTHLY_BATCHES"},{key:"PLANS.FEATURE_QUALITY_PDF_REPORTS"},{key:"PLANS.FEATURE_UNLIMITED_PHOTOS"}],buttonText:"PLANS.YOUR_PLAN",buttonVariant:"primary",isCurrentPlan:!1}];ngOnInit(){let e=this.authService.getCurrentUser();e&&e.id?(this.currentUserId=e.id,this.loadCurrentPlan(),sessionStorage.getItem("fromRegistration")==="true"&&(sessionStorage.removeItem("fromRegistration"),setTimeout(()=>{this.showNotification("\xA1Bienvenido! Para comenzar a usar TextilFlow, selecciona y activa tu plan.","info")},500))):console.error("\u274C No user found or user.id is missing")}ngOnDestroy(){this.fullStripeCleanup()}initStripe(){return S(this,null,function*(){try{if(this.stripe=yield Z($.stripePublishableKey),this.stripe)this.stripeLoaded=!0;else throw new Error("Failed to load Stripe")}catch(e){console.error("\u274C Error loading Stripe:",e),this.showNotification("Error loading payment system","error")}})}createStripeElements(){if(!this.stripe){console.error("\u274C Stripe not loaded");return}if(this.cardElement){this.stripeElementReady=!0;let e=document.getElementById("card-element");e&&!e.querySelector("iframe")&&this.cardElement.mount("#card-element");return}setTimeout(()=>{let e=document.getElementById("card-element");if(!e){console.error("\u274C Card container not found, retrying..."),setTimeout(()=>this.createStripeElements(),500);return}try{e.innerHTML="",this.elements||(this.elements=this.stripe.elements()),this.cardElement||(this.cardElement=this.elements.create("card",{style:{base:{fontSize:"16px",color:"#1f2937",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif',fontWeight:"400",lineHeight:"1.5",backgroundColor:"#ffffff","::placeholder":{color:"#9ca3af"},iconColor:"#6b7280"},invalid:{color:"#ef4444",iconColor:"#ef4444"},complete:{color:"#059669",iconColor:"#059669"}},hidePostalCode:!0}),this.setupStripeEventListeners()),this.cardElement.mount("#card-element")}catch(t){console.error("\u274C Error creating Stripe elements:",t),this.showNotification("Error initializing payment form","error")}},800)}setupStripeEventListeners(){this.cardElement&&(this.cardElement.on("ready",()=>{this.stripeElementReady=!0;let e=document.getElementById("card-element");if(e){let t=e.querySelector("iframe");t&&(t.style.height="40px",t.style.width="100%")}}),this.cardElement.on("change",e=>{let t=document.getElementById("card-errors");t&&(e.error?t.textContent=e.error.message:t.textContent="")}),this.cardElement.on("focus",()=>{console.log("Stripe element focused")}),this.cardElement.on("blur",()=>{console.log("Stripe element blurred")}),console.log("\u2705 Stripe event listeners configured"))}destroyStripeElements(){try{if(this.cardElement){console.log("\u{1F504} Destroying Stripe card element...");try{this.cardElement.unmount()}catch{console.log("Element was not mounted, skipping unmount")}this.cardElement.destroy(),this.cardElement=null}this.stripeElementReady=!1,console.log("\u2705 Stripe card element destroyed (Elements instance preserved)")}catch(e){console.error("\u274C Error destroying Stripe elements:",e),this.cardElement=null,this.stripeElementReady=!1}}fullStripeCleanup(){try{this.cardElement&&(this.cardElement.destroy(),this.cardElement=null),this.elements=null,this.stripeElementReady=!1,console.log("\u2705 Full Stripe cleanup completed")}catch(e){console.error("\u274C Error in full cleanup:",e)}}initPaymentForm(){let e=this.authService.getCurrentUser();this.paymentForm=this.fb.group({cardHolder:[e?.name||"",[y.required,y.minLength(3)]],billingAddress:["",[y.required]],billingCity:["",[y.required]],billingCountry:["",[y.required]],billingPhone:["",[y.required]]})}loadCurrentPlan(){this.isLoading=!0;let e=parseInt(this.currentUserId,10);this.configurationService.getConfigurationByUserId(e).subscribe({next:t=>{this.configuration=t,this.currentPlan=this.configuration?.subscriptionPlan||"basic",this.updatePlansDisplay(),this.isLoading=!1,this.checkAndShowPlanSelection()},error:t=>{console.error("Error al cargar configuraci\xF3n:",t),this.currentPlan="basic",this.updatePlansDisplay(),this.isLoading=!1,console.log("\u274C Error loading configuration - showing plan selection as fallback"),this.showPlanSelectionFlow()}})}checkAndShowPlanSelection(){if(console.log("\u{1F50D} === checkAndShowPlanSelection START ==="),console.log("Configuration:",this.configuration),console.log("SubscriptionStatus:",this.configuration?.subscriptionStatus),console.log("Type of status:",typeof this.configuration?.subscriptionStatus),!this.configuration){console.log("\u26A0\uFE0F No configuration found - showing plan selection"),this.showPlanSelectionFlow();return}let e=this.configuration.subscriptionStatus;if(e==="pending"||e==="PENDING"){console.log("\u23F3 Subscription status is PENDING - showing plan selection"),this.showPlanSelectionFlow();return}if(e==="expired"||e==="EXPIRED"){console.log("\u26A0\uFE0F Subscription status is EXPIRED - showing plan selection"),this.showPlanSelectionFlow();return}if(e==="active"||e==="ACTIVE"){console.log("\u2705 Subscription is ACTIVE - hiding plan selection"),this.showPlanSelectionBanner=!1,this.isFirstTimeUser=!1,sessionStorage.getItem("welcomeShown")||(this.showNotification("Su suscripci\xF3n est\xE1 activa. \xA1Bienvenido a TextilFlow!","success"),sessionStorage.setItem("welcomeShown","true"));return}console.log("\u2753 Unknown subscription status:",e,"- showing plan selection by default"),this.showPlanSelectionFlow(),console.log("\u{1F50D} === checkAndShowPlanSelection END ===")}showPlanSelectionFlow(){console.log("\u{1F3AF} Starting plan selection flow..."),this.isFirstTimeUser=!0,this.showPlanSelectionBanner=!0,this.selectedPlanForPayment=this.currentPlan,this.updatePlanSelectionDisplay(),this.showNotification("Bienvenido a TextilFlow. Para comenzar, selecciona y activa tu plan de suscripci\xF3n.","info")}selectPlanForPayment(e){this.selectedPlanForPayment=e,this.updatePlanSelectionDisplay()}proceedToPayment(){this.showPlanSelectionBanner=!1,this.showPaymentModal=!0,setTimeout(()=>{this.createStripeElements()},800)}updatePlanSelectionDisplay(){this.plans.forEach(e=>{e.isCurrentPlan=e.id===this.selectedPlanForPayment,e.id===this.selectedPlanForPayment?(e.buttonText="PLANS.SELECTED",e.buttonVariant="primary"):(e.buttonText="PLANS.SELECT_THIS_PLAN",e.buttonVariant="secondary")})}updatePlansDisplay(){if(this.showPlanSelectionBanner){this.updatePlanSelectionDisplay();return}this.plans.forEach(e=>{e.isCurrentPlan=e.id===this.currentPlan,e.isCurrentPlan?(e.buttonText="PLANS.YOUR_PLAN",e.buttonVariant="primary"):this.currentPlan==="basic"&&e.id==="corporate"?(e.buttonText="PLANS.UPGRADE",e.buttonVariant="primary"):this.currentPlan==="corporate"&&e.id==="basic"?(e.buttonText="PLANS.DOWNGRADE",e.buttonVariant="secondary"):(e.buttonText="PLANS.CHANGE",e.buttonVariant="secondary")})}onPlanAction(e){if(this.showPlanSelectionBanner){this.selectPlanForPayment(e);return}if(e===this.currentPlan){this.showCurrentPlanDetails();return}this.currentPlan==="basic"&&e==="corporate"?(this.selectedPlanForPayment="corporate",this.showUpgradeModal=!0):this.currentPlan==="corporate"&&e==="basic"&&(this.selectedPlanForPayment="basic",this.showDowngradeModal=!0)}processPayment(){return S(this,null,function*(){console.log("\u{1F504} Starting payment process for plan:",this.selectedPlanForPayment);let e=parseInt(this.currentUserId,10);if(isNaN(e)||e<=0){console.error("\u274C Invalid userId:",this.currentUserId),this.showNotification("Error: Invalid user ID","error");return}if(!this.paymentForm.valid){this.showNotification("Please fill all required fields","error");return}if(!this.stripe){console.error("\u274C Stripe not available"),this.showNotification("Payment system not ready","error");return}if(!this.cardElement){console.error("\u274C Card element not available"),this.showNotification("Payment form not ready, please wait and try again","error");return}let t=document.getElementById("card-element");if(!t){console.error("\u274C Card container not found in DOM"),this.showNotification("Payment form error, please close and reopen the modal","error");return}if(!t.querySelector("iframe")){console.error("\u274C Stripe iframe not found"),this.showNotification("Payment form not properly loaded, please try again","error");return}this.isProcessingPayment=!0;try{let p=yield this.createPaymentIntent(e,this.selectedPlanForPayment);if(!this.cardElement)throw new Error("Card element was destroyed during payment process");let _=yield this.stripe.confirmCardPayment(p.clientSecret,{payment_method:{card:this.cardElement,billing_details:{name:this.paymentForm.get("cardHolder")?.value,address:{line1:this.paymentForm.get("billingAddress")?.value,city:this.paymentForm.get("billingCity")?.value,country:this.paymentForm.get("billingCountry")?.value},phone:this.paymentForm.get("billingPhone")?.value}}});if(_.error)throw new Error(_.error.message);this.isProcessingPayment=!1,this.paymentSuccess=!0,setTimeout(()=>{this.showPaymentModal=!1,this.paymentSuccess=!1,this.destroyStripeElements(),this.updatePlanAfterSuccessfulPayment()},2e3)}catch(p){console.error("\u274C Payment error:",p),this.isProcessingPayment=!1,this.showNotification(p.message||this.translateService.instant("PLANS.PAYMENT_ERROR"),"error")}})}updatePlanAfterSuccessfulPayment(){return S(this,null,function*(){if(!this.configuration||!this.configuration.id){console.error("\u274C No se encontr\xF3 configuraci\xF3n v\xE1lida para actualizar"),this.showNotification("Error: No se pudo actualizar el plan","error"),this.loadCurrentPlan();return}let e=parseInt(this.currentUserId,10);this.configurationService.activateSubscription(e,this.selectedPlanForPayment).subscribe({next:t=>{t.subscriptionStatus!=="active"&&t.subscriptionStatus!=="ACTIVE"&&console.error("\u274C WARNING: Backend no retorn\xF3 status active:",t.subscriptionStatus),this.configuration=t,this.currentPlan=this.selectedPlanForPayment,this.isFirstTimeUser=!1,this.showPlanSelectionBanner=!1,this.updatePlansDisplay(),this.showNotification(this.translateService.instant("PLANS.PAYMENT_SUCCESS")+" - "+this.translateService.instant("PLANS.PLAN_ACTIVATED"),"success"),setTimeout(()=>{this.router.navigate(["/businessman/inicio"]).then(()=>{}).catch(a=>{console.error("\u274C Error redirecting:",a),window.location.reload()})},2e3)},error:t=>{console.error("\u274C Error al activar suscripci\xF3n despu\xE9s del pago:",t),console.error("   Error details:",{status:t.status,message:t.message,error:t.error}),this.showNotification("Pago exitoso, pero hubo un problema activando la suscripci\xF3n. Verificando...","warning"),setTimeout(()=>this.loadCurrentPlan(),3e3)}})})}createPaymentIntent(e,t){return isNaN(e)||e<=0?Promise.reject(new Error("Invalid user ID: "+e)):new Promise((a,p)=>{this.paymentService.createPaymentIntent(e,this.selectedPlanForPayment).subscribe({next:_=>{a(_)},error:_=>{console.error("\u274C Error creating payment intent:",_),p(_)}})})}showCurrentPlanDetails(){let e=this.translateService.instant("PLANS.CURRENT_PLAN_INFO",{plan:this.translateService.instant(`PLANS.${this.currentPlan.toUpperCase()}_PLAN`)});this.showNotification(e,"info")}confirmUpgrade(){this.showUpgradeModal=!1,setTimeout(()=>{this.showPaymentModal=!0,setTimeout(()=>{this.createStripeElements()},800)},100)}confirmDowngrade(){this.showDowngradeModal=!1,this.changePlan("basic")}cancelModal(){console.log("\u{1F504} Canceling modal...");let e=document.activeElement;e&&typeof e.blur=="function"&&e.blur(),this.showUpgradeModal=!1,this.showDowngradeModal=!1,this.showPaymentModal=!1,this.paymentSuccess=!1,this.showPaymentModal||setTimeout(()=>{this.destroyStripeElements()},100)}changePlan(e){return S(this,null,function*(){if(!this.configuration||!this.configuration.id){console.error("No se encontr\xF3 configuraci\xF3n v\xE1lida"),this.showNotification(this.translateService.instant("PLANS.PLAN_CHANGE_ERROR"),"error");return}let t=parseInt(this.configuration.id,10);this.configurationService.updateSubscriptionPlan(t,e).subscribe({next:a=>{this.configuration=a,this.currentPlan=e,this.updatePlansDisplay(),this.showNotification(this.translateService.instant("PLANS.PLAN_CHANGED_SUCCESS"),"success")},error:a=>{console.error("Error al actualizar configuraci\xF3n:",a),this.showNotification(this.translateService.instant("PLANS.PLAN_CHANGE_ERROR"),"error")}})})}showNotification(e,t){this.notification={show:!0,message:e,type:t},setTimeout(()=>{this.notification.show=!1},3e3)}getTargetPlan(){return this.plans.find(e=>e.id==="corporate")}formatPrice(e){return`${e.toFixed(2)}`}debugCurrentSubscriptionStatus(){console.log("\u{1F50D} === DEBUGGING SUBSCRIPTION STATUS ==="),console.log("Configuration object:",this.configuration),console.log("SubscriptionStatus value:",this.configuration?.subscriptionStatus),console.log("SubscriptionStatus type:",typeof this.configuration?.subscriptionStatus),console.log("ShowPlanSelectionBanner:",this.showPlanSelectionBanner),console.log("IsFirstTimeUser:",this.isFirstTimeUser),console.log("CurrentPlan:",this.currentPlan),console.log("======================================="),this.configuration?.subscriptionStatus==="ACTIVE"||this.configuration?.subscriptionStatus==="active"?(console.log("\u2705 Status is ACTIVE - banner should be hidden"),this.showPlanSelectionBanner&&(console.error("\u274C BUG: Banner is showing but status is ACTIVE!"),this.showPlanSelectionBanner=!1,this.isFirstTimeUser=!1)):console.log("\u26A0\uFE0F Status is not ACTIVE:",this.configuration?.subscriptionStatus)}static \u0275fac=function(t){return new(t||s)(b(q),b(J),b(W),b(H),b(B),b(R))};static \u0275cmp=N({type:s,selectors:[["app-businessman-plans"]],decls:8,vars:11,consts:[[1,"plans-container"],["class","welcome-banner",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","plans-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"showChange","show","message","type","autoClose","duration"],[1,"welcome-banner"],[1,"welcome-content"],[1,"welcome-icon"],["width","64","height","64","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"welcome-title"],[1,"welcome-description"],[1,"selected-plan-info"],[1,"selected-plan-label"],[1,"selected-plan-details"],[1,"selected-plan-name"],[1,"selected-plan-price"],[1,"proceed-payment-btn",3,"click"],["width","20","height","20","fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"welcome-note"],[1,"loading-state"],[1,"spinner"],[1,"plans-content"],[1,"plans-header"],[1,"plans-grid"],["class","plan-card",3,"current-plan","plan-basic","plan-corporate",4,"ngFor","ngForOf"],[1,"plan-card"],["class","current-badge",4,"ngIf"],["class","selected-badge",4,"ngIf"],[1,"plan-header"],[1,"plan-price"],[1,"currency"],[1,"amount"],[1,"period"],[1,"plan-features"],["class","feature-item",4,"ngFor","ngForOf"],[1,"plan-action"],[1,"plan-button",3,"click","disabled"],[4,"ngIf"],["style","width: 12px; height: 12px; margin-left: 6px; display: inline;","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"current-badge"],[1,"selected-badge"],[1,"feature-item"],[1,"feature-icon"],[1,"feature-text"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",2,"width","12px","height","12px","margin-left","6px","display","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"upgrade-details"],[1,"price-summary"],[1,"modal-actions"],["variant","secondary",3,"click","label"],["variant","primary",3,"click","label"],[1,"warning-list"],[1,"modal-overlay"],[1,"modal-content","payment-modal",3,"click"],[1,"payment-container"],[1,"payment-form",3,"formGroup"],[1,"order-summary"],[1,"summary-header"],[1,"summary-content"],[1,"summary-item"],[1,"item-name"],[1,"item-price"],[1,"summary-period"],[1,"form-section"],[1,"section-title"],[1,"form-group"],[1,"form-label"],["id","card-element",1,"card-element"],["id","card-errors","role","alert",1,"card-errors"],["type","text","formControlName","cardHolder","placeholder","John Doe","autocomplete","cc-name",1,"form-input",3,"disabled"],["type","text","formControlName","billingAddress","placeholder","123 Main Street","autocomplete","street-address",1,"form-input",3,"disabled"],[1,"form-row"],["type","text","formControlName","billingCity","placeholder","New York","autocomplete","address-level2",1,"form-input",3,"disabled"],["type","text","formControlName","billingCountry","placeholder","US","autocomplete","country",1,"form-input",3,"disabled"],["type","tel","formControlName","billingPhone","placeholder","+1 (555) 123-4567","autocomplete","tel",1,"form-input",3,"disabled"],[1,"security-badge"],[1,"security-icon"],[1,"security-text"],[1,"security-title"],[1,"security-subtitle"],[1,"form-actions"],["type","button",1,"btn","btn-primary","btn-payment",3,"click","disabled"],["class","payment-overlay payment-processing",4,"ngIf"],["class","payment-overlay payment-success",4,"ngIf"],[1,"payment-overlay","payment-processing"],[1,"processing-spinner"],[1,"processing-note"],[1,"payment-overlay","payment-success"],[1,"success-icon"]],template:function(t,a){t&1&&(n(0,"div",0),C(1,ee,24,2,"div",1)(2,te,5,3,"div",2)(3,ce,10,7,"div",3)(4,pe,25,19,"div",4)(5,de,32,24,"div",4)(6,ue,82,60,"div",5),n(7,"app-notification",6),u("showChange",function(_){return a.notification.show=_}),i()()),t&2&&(o(),d("ngIf",a.showPlanSelectionBanner),o(),d("ngIf",a.isLoading),o(),d("ngIf",!a.isLoading),o(),d("ngIf",a.showUpgradeModal),o(),d("ngIf",a.showDowngradeModal),o(),d("ngIf",a.showPaymentModal),o(),d("show",a.notification.show)("message",a.notification.message)("type",a.notification.type)("autoClose",!0)("duration",3e3))},dependencies:[T,I,A,F,j,V,D,z,U,G,Y,Q,X,k,L],styles:[".plans-container[_ngcontent-%COMP%]{padding:32px;max-width:1200px;margin:0 auto;background:transparent;min-height:100vh}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;color:#6b7280}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f4f6;border-top:3px solid #866C52;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.plans-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:48px}.plans-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1f2937;margin-bottom:12px}.plans-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;max-width:600px;margin:0 auto}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:40px;margin-bottom:48px;max-width:800px;margin-left:auto;margin-right:auto}.plan-card[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e1e5e9;border-radius:12px;padding:32px 24px;transition:all .3s ease;overflow:hidden;box-shadow:0 2px 8px #00000014}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026}.plan-basic[_ngcontent-%COMP%]{border-color:#e1e5e9;background:#fff}.plan-corporate[_ngcontent-%COMP%]{background:#866c52;color:#fff;border-color:#866c52}.current-plan[_ngcontent-%COMP%]{border-color:#866c52;border-width:3px}.current-plan.plan-basic[_ngcontent-%COMP%]{background:#fff;box-shadow:0 4px 20px #866c5233}.current-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#10b981;color:#fff;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.plan-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:28px}.plan-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;margin-bottom:16px;color:inherit}.plan-corporate[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.plan-price[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;gap:2px;margin-bottom:8px}.currency[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.plan-basic[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#866c52}.plan-corporate[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#fff}.amount[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:700;line-height:1}.plan-basic[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#866c52}.plan-corporate[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#fff}.period[_ngcontent-%COMP%]{font-size:.9rem;color:inherit;opacity:.8;margin-left:2px}.plan-features[_ngcontent-%COMP%]{margin-bottom:32px}.plan-features[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:12px;font-size:.9rem;line-height:1.4}.feature-icon[_ngcontent-%COMP%]{color:#866c52;font-weight:700;font-size:.8rem;margin-top:2px;flex-shrink:0}.plan-corporate[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{color:#fff}.feature-text[_ngcontent-%COMP%]{flex:1;color:inherit}.plan-basic[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]{color:#374151}.plan-corporate[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]{color:#fff}.plan-action[_ngcontent-%COMP%]{margin-top:auto}.plan-button[_ngcontent-%COMP%]{width:100%;padding:12px 24px;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;text-transform:none}.plan-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.plan-button-basic[_ngcontent-%COMP%]{background:#866c52;color:#fff}.plan-button-basic[_ngcontent-%COMP%]:hover:not(:disabled){background:#745a47;transform:translateY(-1px)}.plan-corporate[_ngcontent-%COMP%]   .plan-button-corporate[_ngcontent-%COMP%]{color:#866c52!important}.plan-button-corporate[_ngcontent-%COMP%]{background:#fff;color:#866c52!important}.plan-button-corporate[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff;transform:translateY(-1px)}.current-plan[_ngcontent-%COMP%]   .plan-button[_ngcontent-%COMP%]{opacity:.8}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;max-width:500px;width:90%;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}.payment-modal[_ngcontent-%COMP%]{max-width:600px}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px;border-bottom:1px solid #f3f4f6}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1f2937}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#9ca3af;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.modal-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#6b7280}.modal-body[_ngcontent-%COMP%]{padding:32px}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:24px;color:#6b7280;line-height:1.6}.upgrade-details[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;padding:20px;margin-bottom:24px}.price-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:1.1rem}.warning-list[_ngcontent-%COMP%]{background:#fef3cd;border:1px solid #facc15;border-radius:8px;padding:20px;margin-top:16px}.warning-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:12px 0 0 20px;color:#92400e}.warning-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;padding:24px 32px;border-top:1px solid #f3f4f6}.payment-form[_ngcontent-%COMP%]{padding:0;margin:0}.order-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:0;padding:32px;margin:0;border-bottom:1px solid #e2e8f0}.summary-header[_ngcontent-%COMP%]{margin-bottom:20px}.summary-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:#1f2937}.summary-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.item-name[_ngcontent-%COMP%]{font-size:1rem;color:#374151;font-weight:500}.item-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#866c52}.summary-period[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;text-align:right;margin-top:4px}.form-section[_ngcontent-%COMP%]{padding:32px;border-bottom:1px solid #f3f4f6}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.section-title[_ngcontent-%COMP%]{margin:0 0 24px;font-size:1.1rem;font-weight:600;color:#1f2937}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9rem;font-weight:500;color:#374151}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:16px;font-family:inherit;transition:all .2s ease;background:#fff;color:#1f2937;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#866c52;box-shadow:0 0 0 3px #866c521a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-input[_ngcontent-%COMP%]:invalid{border-color:#ef4444}.card-element[_ngcontent-%COMP%]{padding:0;border:2px solid #e5e7eb;border-radius:8px;background:#fff;min-height:44px;position:relative;transition:all .2s ease;overflow:hidden}.card-element[_ngcontent-%COMP%]:focus-within{border-color:#866c52;box-shadow:0 0 0 3px #866c521a}.card-element[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:44px!important;width:100%!important;border:none!important;background:transparent!important}.card-element[_ngcontent-%COMP%]   .StripeElement[_ngcontent-%COMP%]{padding:12px 16px;background:#fff}.card-element[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;display:block!important}.card-errors[_ngcontent-%COMP%]{color:#ef4444;font-size:14px;margin-top:8px;min-height:20px;font-weight:500}.security-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:20px 32px;background:#f8fafc;border-top:1px solid #e2e8f0;border-bottom:1px solid #e2e8f0}.security-icon[_ngcontent-%COMP%]{font-size:20px;opacity:.8}.security-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.security-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#374151}.security-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;padding:32px;background:#fafbfc}.btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:none;min-width:120px;display:flex;align-items:center;justify-content:center;gap:8px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5e7eb;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]{background:#866c52;color:#fff;box-shadow:0 2px 4px #866c5233}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#745a47;transform:translateY(-1px);box-shadow:0 4px 8px #866c524d}.btn-text[_ngcontent-%COMP%]{font-weight:600}.payment-success[_ngcontent-%COMP%]{text-align:center;padding:48px 32px}.success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:#10b981;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 24px;animation:_ngcontent-%COMP%_successPulse .6s ease-out}@keyframes _ngcontent-%COMP%_successPulse{0%{transform:scale(.5);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}.payment-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.5rem;font-weight:600;color:#10b981}.payment-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.payment-processing[_ngcontent-%COMP%]{text-align:center;padding:48px 32px}.processing-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f4f6;border-top:4px solid #866C52;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 24px}.payment-processing[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.3rem;font-weight:600;color:#1f2937}.payment-processing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.processing-note[_ngcontent-%COMP%]{font-size:.85rem;color:#f59e0b;margin-top:8px;font-style:italic}@media (max-width: 768px){.plans-container[_ngcontent-%COMP%]{padding:20px}.plans-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:24px;max-width:400px}.plan-card[_ngcontent-%COMP%]{padding:24px 20px}.amount[_ngcontent-%COMP%]{font-size:2.4rem}.modal-content[_ngcontent-%COMP%]{margin:20px;width:calc(100% - 40px)}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.form-section[_ngcontent-%COMP%], .order-summary[_ngcontent-%COMP%]{padding:24px 20px}.form-actions[_ngcontent-%COMP%]{padding:24px 20px;flex-direction:column}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.security-badge[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column;text-align:center}}@media (max-width: 480px){.plans-container[_ngcontent-%COMP%]{padding:16px}.plan-card[_ngcontent-%COMP%]{padding:20px 16px}.plans-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}.amount[_ngcontent-%COMP%]{font-size:2rem}.form-section[_ngcontent-%COMP%], .order-summary[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%]{padding:20px 16px}.btn[_ngcontent-%COMP%]{min-width:100px;font-size:.9rem}}.payment-container[_ngcontent-%COMP%]{position:relative;min-height:400px}.form-hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;pointer-events:none;transition:opacity .3s ease}.payment-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;animation:_ngcontent-%COMP%_overlayFadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_overlayFadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.payment-overlay.payment-processing[_ngcontent-%COMP%]{padding:48px 32px}.payment-overlay.payment-processing[_ngcontent-%COMP%]   .processing-spinner[_ngcontent-%COMP%]{margin-bottom:24px}.payment-overlay.payment-processing[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.3rem;font-weight:600;color:#1f2937}.payment-overlay.payment-processing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0;text-align:center}.payment-overlay.payment-processing[_ngcontent-%COMP%]   .processing-note[_ngcontent-%COMP%]{font-size:.85rem;color:#f59e0b;margin-top:8px;font-style:italic}.payment-overlay.payment-success[_ngcontent-%COMP%]{padding:48px 32px}.payment-overlay.payment-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{margin-bottom:24px}.payment-overlay.payment-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.5rem;font-weight:600;color:#10b981}.payment-overlay.payment-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0;text-align:center}@media (max-width: 768px){.payment-overlay.payment-processing[_ngcontent-%COMP%], .payment-overlay.payment-success[_ngcontent-%COMP%]{padding:32px 20px}}@media (max-width: 480px){.payment-overlay.payment-processing[_ngcontent-%COMP%], .payment-overlay.payment-success[_ngcontent-%COMP%]{padding:24px 16px}.payment-overlay.payment-processing[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-overlay.payment-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem}}.selected-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#866c52;color:#fff;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.plan-button-selected[_ngcontent-%COMP%]{background:#10b981!important;color:#fff!important;transform:scale(1.02);box-shadow:0 4px 12px #10b9814d}.plan-button-selected[_ngcontent-%COMP%]:hover{background:#059669!important;transform:scale(1.02) translateY(-1px)}@media (max-width: 768px){.bg-gradient-to-r[_ngcontent-%COMP%]{margin:0 -20px 32px;border-radius:0}}@media (max-width: 480px){.bg-gradient-to-r[_ngcontent-%COMP%]{padding:24px 16px}.bg-gradient-to-r[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.bg-gradient-to-r[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}.welcome-banner[_ngcontent-%COMP%]{color:#745a47;padding:48px 32px;border-radius:16px;margin-bottom:48px;box-shadow:0 10px 25px #25282b;text-align:center}.welcome-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.welcome-icon[_ngcontent-%COMP%]{margin-bottom:24px}.welcome-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;margin:0 auto;background:#fff3;border-radius:50%;padding:16px}.welcome-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 16px;color:#fff}.welcome-description[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 32px;color:#ffffffe6;line-height:1.6}.selected-plan-info[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:24px;margin:0 auto 32px;max-width:400px;border:1px solid rgba(255,255,255,.2)}.selected-plan-label[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;margin:0 0 12px}.selected-plan-details[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap}.selected-plan-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff}.selected-plan-price[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff}.proceed-payment-btn[_ngcontent-%COMP%]{background:#745a47;color:#25282b;border:none;padding:16px 32px;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;display:inline-flex;align-items:center;gap:12px;margin-bottom:16px}.proceed-payment-btn[_ngcontent-%COMP%]:hover{background:#25282b;transform:translateY(-2px);box-shadow:0 6px 20px #0003}.proceed-payment-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.welcome-note[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3;margin:0;font-style:italic}.selected-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#10b981;color:#fff;padding:6px 12px;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 2px 8px #10b9814d}.plan-button-selected[_ngcontent-%COMP%]{background:#10b981!important;color:#fff!important;transform:scale(1.02);box-shadow:0 4px 12px #10b9814d;border:2px solid #10b981!important}.plan-button-selected[_ngcontent-%COMP%]:hover{background:#059669!important;transform:scale(1.02) translateY(-1px);box-shadow:0 6px 16px #10b98166}.plan-card[class*=plan-basic][_ngcontent-%COMP%], .plan-card[class*=plan-corporate][_ngcontent-%COMP%]{transition:all .3s ease}.plans-grid[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]:has(.plan-button-selected){border-color:#10b981;border-width:2px;box-shadow:0 8px 25px #10b98126;transform:translateY(-2px)}@media (max-width: 768px){.welcome-banner[_ngcontent-%COMP%]{margin:0 -20px 32px;border-radius:0;padding:32px 24px}.welcome-title[_ngcontent-%COMP%]{font-size:1.75rem}.welcome-description[_ngcontent-%COMP%]{font-size:1rem}.selected-plan-info[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px}.selected-plan-details[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.proceed-payment-btn[_ngcontent-%COMP%]{padding:14px 28px;font-size:.95rem}}@media (max-width: 480px){.welcome-banner[_ngcontent-%COMP%]{padding:24px 16px}.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem}.welcome-description[_ngcontent-%COMP%]{font-size:.9rem}.welcome-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;padding:12px}.selected-plan-info[_ngcontent-%COMP%]{padding:16px}.selected-plan-name[_ngcontent-%COMP%]{font-size:1.2rem}.selected-plan-price[_ngcontent-%COMP%]{font-size:1.6rem}.proceed-payment-btn[_ngcontent-%COMP%]{padding:12px 24px;font-size:.9rem;gap:8px}}"]})};export{K as BusinessmanPlansComponent};
