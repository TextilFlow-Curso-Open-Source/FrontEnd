import{i as a,j as c}from"./chunk-GNQ3TXIC.js";import{Z as o,a as u,b as p}from"./chunk-LJ6G2VOH.js";var d=class i extends c{constructor(){super(),this.resourceEndpoint=a.businessSupplierRequests}createRequest(e,s,t,r,n,l,h){let g={businessmanId:e,supplierId:s,status:"pending",message:t,batchType:r,color:n,quantity:l??void 0,address:h,createdAt:new Date().toISOString()};return this.create(g)}getRequestsByBusinessman(e,s){this.http.get(`${this.serverBaseUrl}${this.resourceEndpoint}?businessmanId=${e}`).subscribe({next:t=>{s(t)},error:t=>{console.error("Error al obtener solicitudes del empresario:",t),s([])}})}getRequestsForSupplier(e){return this.http.get(`${this.serverBaseUrl}${this.resourceEndpoint}?supplierId=${e}`)}updateRequestStatus(e,s){return{subscribe:t=>{this.http.get(`${this.serverBaseUrl}${this.resourceEndpoint}/${e}`).subscribe({next:r=>{let n=p(u({},r),{status:s,updatedAt:new Date().toISOString()});this.http.put(`${this.serverBaseUrl}${this.resourceEndpoint}/${e}`,n).subscribe(t)},error:r=>{t.error&&t.error(r)}})}}}checkExistingRequest(e,s){return this.http.get(`${this.serverBaseUrl}${this.resourceEndpoint}?businessmanId=${e}&supplierId=${s}&status_ne=rejected`)}static \u0275fac=function(s){return new(s||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
