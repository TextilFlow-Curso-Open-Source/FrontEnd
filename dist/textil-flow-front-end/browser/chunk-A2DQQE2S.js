import{a as J,c as K}from"./chunk-637EA4O6.js";import{b as X}from"./chunk-ENPCZ4PV.js";import{a as Z}from"./chunk-JGNPUBHB.js";import{S as Q,c as Y,g as W,j as $,q as G}from"./chunk-3QVQVNEG.js";import"./chunk-ZM53J4V7.js";import{b as q}from"./chunk-GG34XMCG.js";import{c as N,d as R,e as D,j as z,k as L,l as F}from"./chunk-6CUNOLLP.js";import{C as j,x as U,z as H}from"./chunk-PY2MZTIA.js";import"./chunk-QHSPJAHQ.js";import"./chunk-2V72WRPO.js";import{$a as o,Ab as C,Hb as n,Ib as i,Jb as T,Nb as O,Rb as g,Sb as p,Vb as h,Za as M,bc as s,cc as u,dc as f,eb as S,ec as w,gc as k,hc as y,ic as B,la as m,lb as P,lc as V,ma as v,nc as l,oc as d,pc as E,qb as x,qc as A,yb as _}from"./chunk-3V6P7TZ6.js";var te=()=>[1,2,3,4,5];function ne(c,t){if(c&1&&(n(0,"span",20),s(1),i()),c&2){let e=p(2);o(),f("(",e.filteredObservations.length,")")}}function ie(c,t){if(c&1){let e=O();n(0,"button",21),g("click",function(){m(e);let a=p(2);return v(a.clearSearch())}),n(1,"i",22),s(2,"close"),i()()}}function ae(c,t){if(c&1){let e=O();n(0,"div",23)(1,"div",24)(2,"button",25),g("click",function(){m(e);let a=p(2);return v(a.setStatusFilter(null))}),n(3,"i",22),s(4,"select_all"),i(),s(5),l(6,"translate"),i(),n(7,"button",25),g("click",function(){m(e);let a=p(2);return v(a.setStatusFilter(a.OBSERVATION_STATUS.PENDIENTE))}),n(8,"span",26),s(9,"\u25CF"),i(),s(10),l(11,"translate"),i(),n(12,"button",25),g("click",function(){m(e);let a=p(2);return v(a.setStatusFilter("EN_REVISION"))}),n(13,"span",27),s(14,"\u25CF"),i(),s(15),l(16,"translate"),i()()()}if(c&2){let e=p(2);o(2),C("active",!e.statusFilter),o(3),f(" ",d(6,9,"OBSERVATION.ALL_STATUSES")," "),o(2),C("active",e.statusFilter===e.OBSERVATION_STATUS.PENDIENTE),o(3),f(" ",d(11,11,"OBSERVATION.STATUS_PENDING")," "),o(2),C("active",e.statusFilter==="EN_REVISION"),o(3),f(" ",d(16,13,"OBSERVATION.STATUS_VIEWED")," ")}}function oe(c,t){if(c&1){let e=O();n(0,"div",28)(1,"div",29)(2,"i",22),s(3,"check_circle"),i(),n(4,"span"),s(5),l(6,"translate"),i()(),n(7,"div",30)(8,"app-button",31),l(9,"translate"),g("click",function(){m(e);let a=p(2);return v(a.deleteSelectedObservations())}),i(),n(10,"app-button",32),l(11,"translate"),g("click",function(){m(e);let a=p(2);return v(a.selectedObservations.clear())}),i()()()}if(c&2){let e=p(2);o(5),w("",e.selectedObservations.size," ",d(6,5,"OBSERVATION.SELECTED"),""),o(3),h("label",d(9,7,"COMMON.DELETE")),_("loading",e.isDeleting),o(2),h("label",d(11,9,"COMMON.CLEAR_SELECTION"))}}function re(c,t){c&1&&(n(0,"div",36),T(1,"div",37)(2,"div",37)(3,"div",37)(4,"div",37)(5,"div",37)(6,"div",37),i())}function se(c,t){c&1&&(n(0,"div",33)(1,"div",34),x(2,re,7,0,"div",35),i()()),c&2&&(o(2),_("ngForOf",V(1,te)))}function ce(c,t){if(c&1){let e=O();n(0,"app-button",41),l(1,"translate"),g("click",function(){m(e);let a=p(3);return v(a.clearSearch())}),i()}c&2&&h("label",d(1,1,"OBSERVATION.CLEAR_SEARCH"))}function le(c,t){if(c&1&&(n(0,"div",38)(1,"div",39)(2,"i",22),s(3,"report_problem"),i()(),n(4,"h3"),s(5),l(6,"translate"),l(7,"translate"),i(),n(8,"p"),s(9),l(10,"translate"),l(11,"translate"),i(),x(12,ce,2,3,"app-button",40),i()),c&2){let e=p(2);o(5),u(e.searchTerm?d(6,3,"OBSERVATION.NO_MATCHING_OBSERVATIONS"):d(7,5,"OBSERVATION.NO_OBSERVATIONS_YET")),o(4),u(e.searchTerm?d(10,7,"OBSERVATION.TRY_DIFFERENT_SEARCH"):d(11,9,"OBSERVATION.START_MAKING_OBSERVATIONS")),o(3),_("ngIf",e.searchTerm)}}function de(c,t){c&1&&(n(0,"span",72),s(1),l(2,"translate"),i()),c&2&&(o(),u(d(2,1,"OBSERVATION.NEW")))}function pe(c,t){c&1&&(n(0,"i",73),s(1,"phone"),i())}function _e(c,t){c&1&&(n(0,"i",74),l(1,"translate"),s(2," image "),i()),c&2&&_("title",d(1,1,"OBSERVATION.HAS_EVIDENCE"))}function me(c,t){c&1&&(n(0,"i",75),l(1,"translate"),s(2," image_not_supported "),i()),c&2&&_("title",d(1,1,"OBSERVATION.NO_EVIDENCE"))}function ve(c,t){if(c&1){let e=O();n(0,"tr",51),g("click",function(){let a=m(e).$implicit,b=p(3);return v(b.viewObservationDetails(a))}),n(1,"td",52),g("click",function(a){return m(e),v(a.stopPropagation())}),n(2,"input",53),g("change",function(){let a=m(e).$implicit,b=p(3);return v(b.toggleObservationSelection(a))}),i()(),n(3,"td",54)(4,"div",55)(5,"i",56),s(6,"qr_code"),i(),n(7,"strong"),s(8),i(),x(9,de,3,3,"span",57),i()(),n(10,"td")(11,"div",58)(12,"span",59),s(13),l(14,"slice"),i()()(),n(15,"td")(16,"span",60),s(17),l(18,"date"),i()(),n(19,"td")(20,"div",61)(21,"span",62),g("click",function(a){let b=m(e).$implicit,I=p(3);return I.isObservationViewed(b)&&I.showContactInfo(b),v(a.stopPropagation())}),n(22,"i",63),s(23),i(),s(24),x(25,pe,2,0,"i",64),i()()(),n(26,"td")(27,"div",65),x(28,_e,3,3,"i",66)(29,me,3,3,"i",67),i()(),n(30,"td",68),g("click",function(a){return m(e),v(a.stopPropagation())}),n(31,"div",69)(32,"button",70),l(33,"translate"),g("click",function(){let a=m(e).$implicit,b=p(3);return v(b.viewObservationDetails(a))}),n(34,"i",22),s(35,"visibility"),i()(),n(36,"button",71),l(37,"translate"),g("click",function(){let a=m(e).$implicit,b=p(3);return v(b.deleteObservation(a))}),n(38,"i",22),s(39,"delete"),i()()()()()}if(c&2){let e=t.$implicit,r=p(3);C("selected",r.isObservationSelected(e))("recent",r.isRecentObservation(e)),o(2),_("checked",r.isObservationSelected(e)),o(6),u(e.batchCode||"N/A"),o(),_("ngIf",r.isRecentObservation(e)),o(4),u(e.reason.length>60?A(14,20,e.reason,0,60)+"...":e.reason),o(4),u(E(18,24,e.createdAt,"dd/MM/yy HH:mm")),o(4),C("clickable",r.isObservationViewed(e)),_("ngClass",r.getStatusClass(e.status))("title",r.isObservationViewed(e)?"Click para ver informaci\xF3n de contacto":""),o(2),u(r.getStatusIcon(e.status)),o(),f(" ",r.getStatusDisplayLabel(e.status)," "),o(),_("ngIf",r.isObservationViewed(e)),o(3),_("ngIf",e.imageUrl),o(),_("ngIf",!e.imageUrl),o(3),_("title",d(33,27,"OBSERVATION.VIEW_DETAILS")),o(4),_("title",d(37,29,"OBSERVATION.DELETE"))}}function ge(c,t){if(c&1){let e=O();n(0,"div",42)(1,"table",43)(2,"thead")(3,"tr")(4,"th",44)(5,"input",45),g("change",function(){m(e);let a=p(2);return v(a.toggleSelectAll())}),i()(),n(6,"th",46),g("click",function(){m(e);let a=p(2);return v(a.sortBy("batchCode"))}),n(7,"div",47),s(8),l(9,"translate"),n(10,"i",48),s(11,"swap_vert"),i()()(),n(12,"th"),s(13),l(14,"translate"),i(),n(15,"th",46),g("click",function(){m(e);let a=p(2);return v(a.sortBy("createdAt"))}),n(16,"div",47),s(17),l(18,"translate"),n(19,"i",48),s(20,"swap_vert"),i()()(),n(21,"th",46),g("click",function(){m(e);let a=p(2);return v(a.sortBy("status"))}),n(22,"div",47),s(23),l(24,"translate"),n(25,"i",48),s(26,"swap_vert"),i()()(),n(27,"th"),s(28),l(29,"translate"),i(),n(30,"th",49),s(31),l(32,"translate"),i()()(),n(33,"tbody"),x(34,ve,40,31,"tr",50),i()()()}if(c&2){let e=p(2);o(5),_("checked",e.allSelected)("indeterminate",e.someSelected&&!e.allSelected),o(3),f(" ",d(9,10,"OBSERVATION.BATCH_CODE")," "),o(5),u(d(14,12,"OBSERVATION.REASON")),o(4),f(" ",d(18,14,"OBSERVATION.DATE_CREATED")," "),o(6),f(" ",d(24,16,"OBSERVATION.STATUS")," "),o(5),u(d(29,18,"OBSERVATION.EVIDENCE")),o(3),u(d(32,20,"COMMON.ACTIONS")),o(3),_("ngForOf",e.filteredObservations)("ngForTrackBy",e.trackByObservationId)}}function be(c,t){if(c&1){let e=O();n(0,"div")(1,"div",4)(2,"div",5)(3,"h2")(4,"i",6),s(5,"report_problem"),i(),s(6),l(7,"translate"),x(8,ne,2,1,"span",7),i()(),n(9,"div",8)(10,"div",9)(11,"i",10),s(12,"search"),i(),n(13,"input",11),l(14,"translate"),B("ngModelChange",function(a){m(e);let b=p();return y(b.searchTerm,a)||(b.searchTerm=a),v(a)}),g("input",function(){m(e);let a=p();return v(a.filterObservations())})("keyup.enter",function(){m(e);let a=p();return v(a.filterObservations())}),i(),x(15,ie,3,0,"button",12),i(),n(16,"app-button",13),l(17,"translate"),g("click",function(){m(e);let a=p();return v(a.toggleFilters())}),i(),n(18,"app-button",14),l(19,"translate"),g("click",function(){m(e);let a=p();return v(a.loadObservations())}),i()()(),x(20,ae,17,15,"div",15)(21,oe,12,11,"div",16)(22,se,3,2,"div",17)(23,le,13,11,"div",18)(24,ge,35,22,"div",19),i()}if(c&2){let e=p();o(6),f(" ",d(7,13,"OBSERVATION.MY_OBSERVATIONS")," "),o(2),_("ngIf",!e.isLoading),o(5),h("placeholder",d(14,15,"OBSERVATION.SEARCH_PLACEHOLDER")),k("ngModel",e.searchTerm),o(2),_("ngIf",e.searchTerm),o(),h("label",d(17,17,"COMMON.FILTER")),o(2),h("label",d(19,19,"COMMON.REFRESH")),_("loading",e.isLoading),o(2),_("ngIf",e.showQuickFilters),o(),_("ngIf",e.someSelected),o(),_("ngIf",e.isLoading),o(),_("ngIf",!e.isLoading&&e.filteredObservations.length===0),o(),_("ngIf",!e.isLoading&&e.filteredObservations.length>0)}}function ue(c,t){c&1&&(n(0,"i",73),s(1,"phone"),i())}function fe(c,t){if(c&1&&(n(0,"div",82)(1,"label")(2,"i",22),s(3,"update"),i(),s(4),l(5,"translate"),i(),n(6,"div",83),s(7),l(8,"date"),i()()),c&2){let e=p(2);o(4),f(" ",d(5,2,"OBSERVATION.DATE_UPDATED"),": "),o(3),u(E(8,4,e.selectedObservation.updatedAt,"dd/MM/yyyy HH:mm"))}}function xe(c,t){if(c&1){let e=O();n(0,"div",91)(1,"div",92)(2,"i",22),s(3,"image"),i(),n(4,"h3"),s(5),l(6,"translate"),i()(),n(7,"img",93),l(8,"translate"),g("click",function(){m(e);let a=p(2);return v(a.openImageModal(a.selectedObservation.imageUrl))}),i()()}if(c&2){let e=p(2);o(5),u(d(6,3,"OBSERVATION.EVIDENCE_IMAGE")),o(2),h("alt",d(8,5,"OBSERVATION.EVIDENCE_IMAGE")),_("src",e.selectedObservation.imageUrl,M)}}function Oe(c,t){if(c&1){let e=O();n(0,"div",94)(1,"div",95)(2,"i",22),s(3,"support_agent"),i(),n(4,"h3"),s(5),l(6,"translate"),i()(),n(7,"div",96)(8,"p"),s(9),l(10,"translate"),i(),n(11,"app-button",97),l(12,"translate"),g("click",function(){m(e);let a=p(2);return v(a.showContactInfo(a.selectedObservation))}),i()()()}if(c&2){let e=p(2);o(5),u(d(6,4,"OBSERVATION.CONTACT_INFO")),o(4),u(d(10,6,"OBSERVATION.CONTACT_DESCRIPTION")),o(2),h("label",d(12,8,"OBSERVATION.SHOW_CONTACT")),_("loading",e.isLoadingContact)}}function he(c,t){if(c&1){let e=O();n(0,"div",76)(1,"div",77)(2,"app-button",78),g("click",function(){m(e);let a=p();return v(a.backToTable())}),i(),n(3,"h2")(4,"i",79),s(5,"report_problem"),i(),s(6),l(7,"translate"),i()(),n(8,"div",80)(9,"div",81)(10,"div",82)(11,"label")(12,"i",22),s(13,"qr_code"),i(),s(14),l(15,"translate"),i(),n(16,"div",83),s(17),i()(),n(18,"div",82)(19,"label")(20,"i",22),s(21,"schedule"),i(),s(22),l(23,"translate"),i(),n(24,"div",83)(25,"span",84),g("click",function(){m(e);let a=p();return v(a.isObservationViewed(a.selectedObservation)?a.showContactInfo(a.selectedObservation):null)}),n(26,"i",63),s(27),i(),s(28),x(29,ue,2,0,"i",64),i()()(),n(30,"div",82)(31,"label")(32,"i",22),s(33,"calendar_today"),i(),s(34),l(35,"translate"),i(),n(36,"div",83),s(37),l(38,"date"),i()(),x(39,fe,9,7,"div",85),n(40,"div",86)(41,"label")(42,"i",22),s(43,"edit_note"),i(),s(44),l(45,"translate"),i(),n(46,"div",87),s(47),i()()(),x(48,xe,9,7,"div",88)(49,Oe,13,10,"div",89),n(50,"div",90)(51,"app-button",31),l(52,"translate"),g("click",function(){m(e);let a=p();return v(a.deleteObservation(a.selectedObservation))}),i()()()()}if(c&2){let e=p();o(6),w(" ",d(7,20,"OBSERVATION.OBSERVATION_DETAIL")," ",e.selectedObservation.batchCode," "),o(8),f(" ",d(15,22,"OBSERVATION.BATCH_CODE"),": "),o(3),u(e.selectedObservation.batchCode),o(5),f(" ",d(23,24,"OBSERVATION.STATUS"),": "),o(3),C("clickable",e.isObservationViewed(e.selectedObservation)),_("ngClass",e.getStatusClass(e.selectedObservation.status)),o(2),u(e.getStatusIcon(e.selectedObservation.status)),o(),f(" ",e.getStatusDisplayLabel(e.selectedObservation.status)," "),o(),_("ngIf",e.isObservationViewed(e.selectedObservation)),o(5),f(" ",d(35,26,"OBSERVATION.DATE_CREATED"),": "),o(3),u(E(38,28,e.selectedObservation.createdAt,"dd/MM/yyyy HH:mm")),o(2),_("ngIf",e.selectedObservation.updatedAt),o(5),f(" ",d(45,31,"OBSERVATION.REASON"),": "),o(3),u(e.selectedObservation.reason),o(),_("ngIf",e.selectedObservation.imageUrl),o(),_("ngIf",e.isObservationViewed(e.selectedObservation)),o(2),h("label",d(52,33,"OBSERVATION.DELETE")),_("loading",e.isDeleting)}}var ee=class c{constructor(t,e,r,a){this.observationService=t;this.authService=e;this.translateService=r;this.supplierService=a}view="table";observations=[];filteredObservations=[];selectedObservation=null;selectedObservations=new Set;currentUserId="";searchTerm="";showQuickFilters=!1;statusFilter=null;sortField="createdAt";sortDirection="desc";isLoading=!1;isDeleting=!1;notification={show:!1,message:"",type:"success"};OBSERVATION_STATUS=J;ngOnInit(){let t=this.authService.getCurrentUser();t&&t.id&&(this.currentUserId=t.id,this.loadObservations())}loadObservations(){this.isLoading=!0,this.observationService.getByBusinessmanId(this.currentUserId).subscribe({next:t=>{console.log("Todas las observaciones:",t),console.log("ID de usuario actual:",this.currentUserId),this.observations=t.filter(e=>e.businessmanId.toString()===this.currentUserId),console.log("Observaciones filtradas:",this.observations),this.filteredObservations=[...this.observations],this.filterObservations(),this.isLoading=!1},error:t=>{console.error("Error al cargar observaciones:",t),this.showNotification("Error al cargar las observaciones","error"),this.isLoading=!1}})}clearSearch(){this.searchTerm="",this.filterObservations()}toggleFilters(){this.showQuickFilters=!this.showQuickFilters}setStatusFilter(t){this.statusFilter=t,this.filterObservations()}filterObservations(){let t=[...this.observations];if(this.searchTerm&&this.searchTerm.trim()){let e=this.searchTerm.toLowerCase().trim();t=t.filter(r=>r.batchCode&&r.batchCode.toLowerCase().includes(e)||r.reason&&r.reason.toLowerCase().includes(e)||r.status&&r.status.toLowerCase().includes(e))}this.statusFilter&&(t=t.filter(e=>e.status===this.statusFilter)),t=this.sortObservations(t),this.filteredObservations=t}sortBy(t){this.sortField===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=t,this.sortDirection="asc"),this.filterObservations()}sortObservations(t){return t.sort((e,r)=>{let a,b;switch(this.sortField){case"batchCode":a=e.batchCode||"",b=r.batchCode||"";break;case"createdAt":a=new Date(e.createdAt),b=new Date(r.createdAt);break;case"status":a=e.status||"",b=r.status||"";break;default:return 0}return a<b?this.sortDirection==="asc"?-1:1:a>b?this.sortDirection==="asc"?1:-1:0})}trackByObservationId(t,e){return e.id||t.toString()}toggleObservationSelection(t){t.id&&(this.selectedObservations.has(t.id)?this.selectedObservations.delete(t.id):this.selectedObservations.add(t.id))}toggleSelectAll(){this.filteredObservations.every(e=>e.id&&this.selectedObservations.has(e.id))?this.filteredObservations.forEach(e=>{e.id&&this.selectedObservations.delete(e.id)}):this.filteredObservations.forEach(e=>{e.id&&this.selectedObservations.add(e.id)})}get allSelected(){return this.filteredObservations.length>0&&this.filteredObservations.every(t=>t.id&&this.selectedObservations.has(t.id))}get someSelected(){return this.selectedObservations.size>0}getStatusIcon(t){switch(t?.toUpperCase()||""){case"PENDIENTE":return"schedule";case"EN_REVISION":return"visibility";case"RESUELTA":return"check_circle";case"RECHAZADA":return"cancel";default:return"help"}}getStatusClass(t){switch(t?.toUpperCase()||""){case"PENDIENTE":return"status-pending";case"EN_REVISION":return"status-viewed";case"RESUELTA":return"status-resolved";case"RECHAZADA":return"status-rejected";default:return""}}viewObservationDetails(t){this.selectedObservation=t,this.view="detail"}backToTable(){this.view="table",this.selectedObservation=null}deleteSelectedObservations(){if(this.selectedObservations.size===0)return;let t=this.selectedObservations.size,e=t===1?"\xBFEst\xE1 seguro de eliminar esta observaci\xF3n?":`\xBFEst\xE1 seguro de eliminar ${t} observaciones?`;confirm(e)&&this.performDelete()}deleteObservation(t){t.id&&confirm(`\xBFEst\xE1 seguro de eliminar la observaci\xF3n del lote ${t.batchCode}?`)&&(this.selectedObservations.clear(),this.selectedObservations.add(t.id),this.performDelete())}performDelete(){this.isDeleting=!0;let t=Array.from(this.selectedObservations),e=0,r=0;t.forEach(a=>{this.observationService.delete(a).subscribe({next:()=>{e++,this.checkDeleteCompletion(e,r,t.length)},error:b=>{console.error("Error al eliminar observaci\xF3n:",b),r++,this.checkDeleteCompletion(e,r,t.length)}})})}checkDeleteCompletion(t,e,r){if(t+e===r){if(this.isDeleting=!1,this.selectedObservations.clear(),t>0){let a=t===1?"Observaci\xF3n eliminada correctamente":`${t} observaciones eliminadas correctamente`;this.showNotification(a,"success"),this.loadObservations()}if(e>0){let a=e===1?"Error al eliminar una observaci\xF3n":`Error al eliminar ${e} observaciones`;this.showNotification(a,"error")}}}openImageModal(t){window.open(t,"_blank")}showNotification(t,e){this.notification={show:!0,message:t,type:e}}isObservationSelected(t){return t.id?this.selectedObservations.has(t.id):!1}getStatusText(t){switch(t?.toUpperCase()||""){case"PENDIENTE":return this.translateService.instant("OBSERVATION.STATUS_PENDING");case"EN_REVISION":return this.translateService.instant("OBSERVATION.STATUS_VIEWED");case"RESUELTA":return this.translateService.instant("OBSERVATION.STATUS_RESOLVED");case"RECHAZADA":return this.translateService.instant("OBSERVATION.STATUS_REJECTED");default:return t}}isLoadingContact=!1;contactInfo=null;showContactInfo(t){t.status?.toUpperCase()==="EN_REVISION"&&(this.isLoadingContact=!0,this.supplierService.getProfileById(t.supplierId.toString()).subscribe({next:e=>{this.isLoadingContact=!1,this.contactInfo={supplierName:e.name,companyName:e.companyName||"Sin nombre de empresa",phone:e.phone||"No disponible",email:e.email,location:this.formatLocation(e),specialization:e.specialization||"Especializaci\xF3n general",description:e.description,batchCode:t.batchCode},this.notification={show:!0,message:"",type:"contact"}},error:e=>{this.isLoadingContact=!1,console.error("Error:",e),this.showNotification("Error al cargar informaci\xF3n del proveedor","error")}}))}formatLocation(t){let e=[];return t.city&&e.push(t.city),t.country&&e.push(t.country),e.length>0?e.join(", "):"Ubicaci\xF3n no especificada"}isRecentObservation(t){let e=new Date(t.createdAt);return Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60))<24}getStatusDisplayLabel(t){switch(t?.toUpperCase()||""){case"PENDIENTE":return"Pendiente";case"EN_REVISION":return"Visto";case"RESUELTA":return"Resuelta";case"RECHAZADA":return"Rechazada";default:return t}}isObservationViewed(t){return t.status?.toUpperCase()==="EN_REVISION"}static \u0275fac=function(e){return new(e||c)(S(K),S(q),S(U),S(X))};static \u0275cmp=P({type:c,selectors:[["app-businessman-observation"]],decls:4,vars:7,consts:[[1,"observation-container"],[4,"ngIf"],["class","detail-view",4,"ngIf"],[3,"close","show","message","type","contactInfo","autoClose"],[1,"table-header"],[1,"header-left"],[1,"material-icons","header-icon"],["class","observation-count",4,"ngIf"],[1,"search-container"],[1,"search-input-wrapper"],[1,"material-icons","search-icon"],["type","text",1,"search-input",3,"ngModelChange","input","keyup.enter","placeholder","ngModel"],["class","clear-search",3,"click",4,"ngIf"],["variant","secondary","icon","tune",3,"click","label"],["variant","text","icon","refresh",3,"click","label","loading"],["class","quick-filters",4,"ngIf"],["class","bulk-actions",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[1,"observation-count"],[1,"clear-search",3,"click"],[1,"material-icons"],[1,"quick-filters"],[1,"filter-chips"],[1,"filter-chip",3,"click"],[1,"status-dot","status-pending"],[1,"status-dot","status-viewed"],[1,"bulk-actions"],[1,"selection-info"],[1,"bulk-buttons"],["variant","primary","icon","delete",3,"click","label","loading"],["variant","text",3,"click","label"],[1,"loading-state"],[1,"skeleton-table"],["class","skeleton-row",4,"ngFor","ngForOf"],[1,"skeleton-row"],[1,"skeleton-cell"],[1,"empty-state"],[1,"empty-icon"],["variant","primary",3,"label","click",4,"ngIf"],["variant","primary",3,"click","label"],[1,"table-wrapper"],[1,"observation-table"],[1,"checkbox-column"],["type","checkbox",1,"table-checkbox",3,"change","checked","indeterminate"],[1,"sortable",3,"click"],[1,"th-content"],[1,"material-icons","sort-icon"],[1,"actions-column"],["class","clickable-row",3,"selected","recent","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"clickable-row",3,"click"],[1,"checkbox-cell",3,"click"],["type","checkbox",1,"table-checkbox",3,"change","checked"],[1,"code-cell"],[1,"batch-code"],[1,"material-icons","batch-icon"],["class","recent-badge",4,"ngIf"],[1,"reason-preview"],[1,"reason-text"],[1,"date-text"],[1,"status-container"],[1,"status-badge",3,"click","ngClass","title"],[1,"material-icons","status-icon"],["class","material-icons contact-icon",4,"ngIf"],[1,"evidence-indicator"],["class","material-icons evidence-icon has-evidence",3,"title",4,"ngIf"],["class","material-icons evidence-icon no-evidence",3,"title",4,"ngIf"],[1,"actions-cell",3,"click"],[1,"action-buttons"],[1,"action-btn","view-btn",3,"click","title"],[1,"action-btn","delete-btn",3,"click","title"],[1,"recent-badge"],[1,"material-icons","contact-icon"],[1,"material-icons","evidence-icon","has-evidence",3,"title"],[1,"material-icons","evidence-icon","no-evidence",3,"title"],[1,"detail-view"],[1,"detail-header"],["label","","icon","arrow_back","variant","back",3,"click"],[1,"material-icons","detail-icon"],[1,"detail-content"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-value"],[1,"status-badge",3,"click","ngClass"],["class","detail-item",4,"ngIf"],[1,"detail-item","full-width"],[1,"detail-value","reason-detail"],["class","evidence-image-container",4,"ngIf"],["class","contact-info-section",4,"ngIf"],[1,"detail-actions"],[1,"evidence-image-container"],[1,"image-header"],[1,"evidence-image",3,"click","src","alt"],[1,"contact-info-section"],[1,"contact-header"],[1,"contact-content"],["variant","primary","icon","phone",3,"click","label","loading"]],template:function(e,r){e&1&&(n(0,"div",0),x(1,be,25,21,"div",1)(2,he,53,35,"div",2),n(3,"app-notification",3),g("close",function(){return r.notification.show=!1,r.contactInfo=null}),i()()),e&2&&(o(),_("ngIf",r.view==="table"),o(),_("ngIf",r.view==="detail"&&r.selectedObservation),o(),_("show",r.notification.show)("message",r.notification.message)("type",r.notification.type)("contactInfo",r.contactInfo)("autoClose",r.notification.type!=="info"))},dependencies:[F,N,R,D,L,z,G,Y,W,$,Q,Z,j,H],styles:[".observation-container[_ngcontent-%COMP%]{padding:24px;background:#f8f9fa;min-height:calc(100vh - 80px)}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;background:#fff;padding:20px 24px;border-radius:12px;box-shadow:0 2px 8px #00000014}.header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:24px;font-weight:600;display:flex;align-items:center;gap:12px}.header-icon[_ngcontent-%COMP%]{color:#e74c3c;font-size:28px}.observation-count[_ngcontent-%COMP%]{color:#7f8c8d;font-size:16px;font-weight:400}.search-container[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-shrink:0}.search-input-wrapper[_ngcontent-%COMP%]{position:relative;width:350px;flex-shrink:0}.search-input[_ngcontent-%COMP%]{width:250px;padding:12px 16px 12px 44px;border:2px solid #e1e8ed;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff;color:#2c3e50}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.search-input[_ngcontent-%COMP%]::placeholder{color:#95a5a6}.search-icon[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#95a5a6;font-size:20px;pointer-events:none}.clear-search[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;color:#95a5a6;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s ease}.clear-search[_ngcontent-%COMP%]:hover{background:#ecf0f1;color:#2c3e50}.quick-filters[_ngcontent-%COMP%]{background:#fff;padding:16px 24px;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #00000014}.filter-chips[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.filter-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border:2px solid #e1e8ed;background:#fff;border-radius:20px;font-size:14px;cursor:pointer;transition:all .2s ease;font-weight:500}.filter-chip[_ngcontent-%COMP%]:hover{border-color:#3498db;background:#f8f9fa}.filter-chip.active[_ngcontent-%COMP%]{background:#3498db;border-color:#3498db;color:#fff}.status-dot[_ngcontent-%COMP%]{font-size:12px}.bulk-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#3498db;color:#fff;padding:12px 24px;border-radius:12px;margin-bottom:16px;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.selection-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500}.bulk-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.loading-state[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #00000014}.skeleton-table[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.skeleton-row[_ngcontent-%COMP%]{display:flex;gap:16px}.skeleton-cell[_ngcontent-%COMP%]{height:20px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:4px;flex:1}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014}.empty-icon[_ngcontent-%COMP%]{margin-bottom:24px}.empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:72px;color:#bdc3c7}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 12px;font-size:20px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0 0 24px;font-size:16px}.table-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.observation-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.observation-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8f9fa}.observation-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-weight:600;color:#2c3e50;border-bottom:2px solid #e1e8ed;font-size:14px}.observation-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.observation-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#e9ecef}.th-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.sort-icon[_ngcontent-%COMP%]{font-size:18px;color:#95a5a6;transition:color .2s ease}.observation-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover   .sort-icon[_ngcontent-%COMP%]{color:#3498db}.observation-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e1e8ed;transition:all .2s ease}.observation-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.observation-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#e3f2fd}.observation-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.recent[_ngcontent-%COMP%]{border-left:4px solid #2ecc71}.observation-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]{cursor:pointer}.observation-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;vertical-align:middle;font-size:14px}.checkbox-column[_ngcontent-%COMP%]{width:48px;text-align:center}.checkbox-cell[_ngcontent-%COMP%]{text-align:center}.table-checkbox[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#3498db;cursor:pointer}.code-cell[_ngcontent-%COMP%]{min-width:140px}.batch-code[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;position:relative}.batch-icon[_ngcontent-%COMP%]{color:#3498db;font-size:20px}.recent-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;font-size:10px;padding:2px 6px;border-radius:8px;font-weight:600;text-transform:uppercase;margin-left:8px}.reason-preview[_ngcontent-%COMP%]{max-width:200px}.reason-text[_ngcontent-%COMP%]{color:#2c3e50;line-height:1.4}.date-text[_ngcontent-%COMP%]{color:#7f8c8d;font-size:13px;white-space:nowrap}.status-container[_ngcontent-%COMP%]{display:flex;align-items:center}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.status-viewed[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.status-icon[_ngcontent-%COMP%]{font-size:16px}.evidence-indicator[_ngcontent-%COMP%]{text-align:center}.evidence-icon[_ngcontent-%COMP%]{font-size:20px}.evidence-icon.has-evidence[_ngcontent-%COMP%]{color:#2ecc71}.evidence-icon.no-evidence[_ngcontent-%COMP%]{color:#95a5a6}.actions-column[_ngcontent-%COMP%]{width:120px;text-align:center}.actions-cell[_ngcontent-%COMP%]{text-align:center}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.action-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;font-size:0}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.view-btn[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.view-btn[_ngcontent-%COMP%]:hover{background:#bbdefb;transform:translateY(-1px)}.delete-btn[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.delete-btn[_ngcontent-%COMP%]:hover{background:#ffcdd2;transform:translateY(-1px)}.detail-view[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.detail-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px 24px;border-bottom:2px solid #e1e8ed;display:flex;align-items:center;gap:16px}.detail-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:20px;font-weight:600;display:flex;align-items:center;gap:12px}.detail-icon[_ngcontent-%COMP%]{color:#e74c3c;font-size:24px}.detail-content[_ngcontent-%COMP%]{padding:24px}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;margin-bottom:32px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:14px;display:flex;align-items:center;gap:8px}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db;font-size:18px}.detail-value[_ngcontent-%COMP%]{font-size:15px;color:#2c3e50;line-height:1.4}.reason-detail[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;border-left:4px solid #3498db;white-space:pre-wrap}.evidence-image-container[_ngcontent-%COMP%]{margin-bottom:32px}.image-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.image-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db;font-size:24px}.image-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:18px;font-weight:600}.evidence-image[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:8px;box-shadow:0 4px 12px #0000001a;cursor:pointer;transition:transform .2s ease}.evidence-image[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.detail-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:24px;border-top:1px solid #e1e8ed}@media (max-width: 1200px){.search-input-wrapper[_ngcontent-%COMP%]{width:300px}}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}.search-input-wrapper[_ngcontent-%COMP%]{width:280px}}@media (max-width: 768px){.observation-container[_ngcontent-%COMP%]{padding:16px}.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.search-container[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:12px;justify-content:center}.search-input-wrapper[_ngcontent-%COMP%]{width:100%;min-width:250px}.filter-chips[_ngcontent-%COMP%]{justify-content:center}.bulk-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}.observation-table[_ngcontent-%COMP%]{font-size:12px}.observation-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .observation-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.detail-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.action-buttons[_ngcontent-%COMP%]{justify-content:space-around}}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.observation-count[_ngcontent-%COMP%]{font-size:14px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.observation-table[_ngcontent-%COMP%]{min-width:600px}.search-input-wrapper[_ngcontent-%COMP%]{width:100%;min-width:auto}.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.status-badge.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease;position:relative}.status-badge.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #00000026}.contact-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:4px;opacity:.7}.status-badge.clickable[_ngcontent-%COMP%]:hover   .contact-icon[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.contact-info-section[_ngcontent-%COMP%]{background:#e3f2fd;border:1px solid #bbdefb;border-radius:12px;padding:20px;margin-top:24px}.contact-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.contact-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1976d2;font-size:24px}.contact-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1976d2;font-size:18px;font-weight:600}.contact-content[_ngcontent-%COMP%]{color:#1565c0;line-height:1.6}.contact-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px}.status-viewed.clickable[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.status-viewed.clickable[_ngcontent-%COMP%]:hover{background:#1976d2;color:#fff;border-color:#1976d2}"]})};export{ee as BusinessmanObservationComponent};
