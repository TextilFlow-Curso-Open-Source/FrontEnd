import{a as ee}from"./chunk-QJN4MAFU.js";import{f as J}from"./chunk-7B7PG3YE.js";import{R as X,e as m,g as q,h as G,k as Y,l as W,m as H,n as Q,o as j,q as Z}from"./chunk-XXRYAUWQ.js";import{a as h,b as $}from"./chunk-L5EZL6XB.js";import"./chunk-XZSHE36Q.js";import{C as z,x as B,z as D}from"./chunk-S4BAPOHJ.js";import{d as A,e as N,k as T,r as V,w as K}from"./chunk-Z3ABZYYA.js";import{g as k}from"./chunk-GNQ3TXIC.js";import{$b as d,Fb as o,Gb as n,Hb as u,Lb as b,Pb as P,Qb as g,U,Ya as M,_a as r,a as S,ac as C,bc as f,cc as F,d as L,db as v,j as x,kb as w,la as _,lc as a,ma as E,mc as l,pb as I,wb as p,yb as y}from"./chunk-LJ6G2VOH.js";function ie(c,e){c&1&&(o(0,"div",10),u(1,"div",11),o(2,"p"),d(3),a(4,"translate"),n()()),c&2&&(r(3),C(l(4,1,"SUPPLIER_PROFILE.LOADING")))}function ne(c,e){if(c&1&&(u(0,"img",50),a(1,"translate")),c&2){let t=g(2);p("src",t.previewUrl,M)("alt",l(1,2,"SUPPLIER_PROFILE.COMPANY_LOGO"))}}function re(c,e){c&1&&(o(0,"div",51)(1,"span",5),d(2,"add_photo_alternate"),n(),o(3,"span"),d(4),a(5,"translate"),n()()),c&2&&(r(4),C(l(5,1,"SUPPLIER_PROFILE.CLICK_TO_UPLOAD")))}function oe(c,e){c&1&&(o(0,"div",52)(1,"span",5),d(2,"edit"),n(),o(3,"span"),d(4),a(5,"translate"),n()()),c&2&&(r(4),C(l(5,1,"SUPPLIER_PROFILE.CLICK_TO_CHANGE")))}function ae(c,e){if(c&1){let t=b();o(0,"div",53)(1,"app-button",54),a(2,"translate"),P("click",function(){_(t);let s=g(2);return E(s.removeImage())}),n()()}c&2&&(r(),p("label",l(2,1,"SUPPLIER_PROFILE.REMOVE_IMAGE")))}function le(c,e){if(c&1){let t=b();o(0,"div",55),P("click",function(){let s=_(t).$implicit,O=g(2);return E(O.toggleCategory(s.value))}),o(1,"span",5),d(2),n(),o(3,"span",56),d(4),n()()}if(c&2){let t=e.$implicit,i=g(2);y("selected",i.isCategorySelected(t.value)),r(2),f(" ",i.isCategorySelected(t.value)?"check_circle":"radio_button_unchecked"," "),r(2),C(t.label)}}function se(c,e){c&1&&(o(0,"span",57),d(1),a(2,"translate"),n()),c&2&&(r(),f(" ",l(2,1,"SUPPLIER_PROFILE.ERRORS.CATEGORIES_REQUIRED")," "))}function ce(c,e){if(c&1){let t=b();o(0,"span",61),d(1),o(2,"button",62),P("click",function(){let s=_(t).$implicit,O=g(3);return E(O.toggleCategory(s))}),o(3,"span",5),d(4,"close"),n()()()}if(c&2){let t=e.$implicit,i=g(3);r(),f(" ",i.getCategoryLabel(t)," ")}}function pe(c,e){if(c&1&&(o(0,"div",58)(1,"h4"),d(2),a(3,"translate"),n(),o(4,"div",59),I(5,ce,5,1,"span",60),n()()),c&2){let t=g(2);r(2),f("",l(3,2,"SUPPLIER_PROFILE.SELECTED_CATEGORIES_LIST"),":"),r(3),p("ngForOf",t.selectedCategories)}}function de(c,e){if(c&1){let t=b();o(0,"div",12)(1,"form",13),P("ngSubmit",function(){_(t);let s=g();return E(s.saveProfile())}),o(2,"div",14)(3,"h2",15)(4,"span",5),d(5,"image"),n(),d(6),a(7,"translate"),n(),o(8,"div",16)(9,"div",17)(10,"div",18),P("click",function(){_(t);let s=g();return E(s.triggerFileInput())}),I(11,ne,2,4,"img",19)(12,re,6,3,"div",20)(13,oe,6,3,"div",21),n(),o(14,"input",22,0),P("change",function(s){_(t);let O=g();return E(O.onFileSelected(s))}),n(),I(16,ae,3,3,"div",23),n(),o(17,"div",24)(18,"p")(19,"strong"),d(20),a(21,"translate"),n()(),o(22,"ul")(23,"li"),d(24),a(25,"translate"),n(),o(26,"li"),d(27),a(28,"translate"),n(),o(29,"li"),d(30),a(31,"translate"),n()()()()(),o(32,"div",14)(33,"h2",15)(34,"span",5),d(35,"person"),n(),d(36),a(37,"translate"),n(),o(38,"div",25)(39,"div",26),u(40,"app-input",27),a(41,"translate"),a(42,"translate"),n(),o(43,"div",26),u(44,"app-input",28),a(45,"translate"),a(46,"translate"),n(),o(47,"div",26),u(48,"app-input",29),a(49,"translate"),a(50,"translate"),n(),o(51,"div",26),u(52,"app-input",30),a(53,"translate"),a(54,"translate"),a(55,"translate"),n(),o(56,"div",31),u(57,"app-input",32),a(58,"translate"),a(59,"translate"),n(),o(60,"div",26),u(61,"app-input",33),a(62,"translate"),a(63,"translate"),n()()(),o(64,"div",14)(65,"h2",15)(66,"span",5),d(67,"business"),n(),d(68),a(69,"translate"),n(),o(70,"div",25)(71,"div",31),u(72,"app-input",34),a(73,"translate"),a(74,"translate"),n(),o(75,"div",26),u(76,"app-input",35),a(77,"translate"),a(78,"translate"),n(),o(79,"div",26),u(80,"app-input",36),a(81,"translate"),a(82,"translate"),n(),o(83,"div",26),u(84,"app-input",37),a(85,"translate"),a(86,"translate"),n(),o(87,"div",26),u(88,"app-input",38),a(89,"translate"),a(90,"translate"),n(),o(91,"div",26),u(92,"app-input",39),a(93,"translate"),a(94,"translate"),n()()(),o(95,"div",14)(96,"h2",15)(97,"span",5),d(98,"category"),n(),d(99),a(100,"translate"),n(),o(101,"p",40),d(102),a(103,"translate"),n(),o(104,"div",41),I(105,le,5,4,"div",42),n(),o(106,"div",43)(107,"span",44),d(108),a(109,"translate"),n(),I(110,se,3,3,"span",45),n(),I(111,pe,6,4,"div",46),n(),o(112,"div",47)(113,"app-button",48),a(114,"translate"),P("click",function(){_(t);let s=g();return E(s.goBack())}),n(),o(115,"app-button",49),a(116,"translate"),P("click",function(){_(t);let s=g();return E(s.saveProfile())}),n()()()()}if(c&2){let t,i=g();r(),p("formGroup",i.form),r(5),f(" ",l(7,75,"SUPPLIER_PROFILE.COMPANY_LOGO")," "),r(4),y("has-image",i.previewUrl),r(),p("ngIf",i.previewUrl),r(),p("ngIf",!i.previewUrl),r(),p("ngIf",i.previewUrl),r(3),p("ngIf",i.previewUrl),r(4),f("",l(21,77,"SUPPLIER_PROFILE.UPLOAD_INSTRUCTIONS"),":"),r(4),C(l(25,79,"SUPPLIER_PROFILE.FORMAT_SUPPORT")),r(3),C(l(28,81,"SUPPLIER_PROFILE.MAX_SIZE")),r(3),C(l(31,83,"SUPPLIER_PROFILE.QUALITY_INFO")),r(6),f(" ",l(37,85,"SUPPLIER_PROFILE.PERSONAL_INFO")," "),r(4),p("label",l(41,87,"SUPPLIER_PROFILE.FULL_NAME"))("placeholder",l(42,89,"SUPPLIER_PROFILE.FULL_NAME_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(45,91,"SUPPLIER_PROFILE.EMAIL"))("placeholder",l(46,93,"SUPPLIER_PROFILE.EMAIL_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(49,95,"SUPPLIER_PROFILE.COUNTRY"))("placeholder",l(50,97,"SUPPLIER_PROFILE.COUNTRY_PLACEHOLDER"))("options",i.countries)("fullWidth",!0)("required",!0),r(4),p("label",l(53,99,"SUPPLIER_PROFILE.CITY"))("placeholder",i.loadingCities?l(54,101,"SUPPLIER_PROFILE.LOADING_CITIES"):l(55,103,"SUPPLIER_PROFILE.CITY_PLACEHOLDER"))("options",i.cities)("fullWidth",!0)("required",!0)("disabled",i.loadingCities||!((t=i.form.get("country"))!=null&&t.value)),r(5),p("label",l(58,105,"SUPPLIER_PROFILE.ADDRESS"))("placeholder",l(59,107,"SUPPLIER_PROFILE.ADDRESS_PLACEHOLDER"))("fullWidth",!0),r(4),p("label",l(62,109,"SUPPLIER_PROFILE.PHONE"))("placeholder",l(63,111,"SUPPLIER_PROFILE.PHONE_PLACEHOLDER"))("fullWidth",!0),r(7),f(" ",l(69,113,"SUPPLIER_PROFILE.COMPANY_INFO")," "),r(4),p("label",l(73,115,"SUPPLIER_PROFILE.COMPANY_NAME"))("placeholder",l(74,117,"SUPPLIER_PROFILE.COMPANY_NAME_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(77,119,"SUPPLIER_PROFILE.RUC"))("placeholder",l(78,121,"SUPPLIER_PROFILE.RUC_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(81,123,"SUPPLIER_PROFILE.SPECIALIZATION"))("placeholder",l(82,125,"SUPPLIER_PROFILE.SELECT_SPECIALIZATION"))("options",i.specializationOptions)("fullWidth",!0)("required",!0),r(4),p("label",l(85,127,"SUPPLIER_PROFILE.YEARS_FOUNDED"))("placeholder",l(86,129,"SUPPLIER_PROFILE.YEARS_FOUNDED_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(89,131,"SUPPLIER_PROFILE.WAREHOUSE_LOCATION"))("placeholder",l(90,133,"SUPPLIER_PROFILE.WAREHOUSE_LOCATION_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(4),p("label",l(93,135,"SUPPLIER_PROFILE.MINIMUM_ORDER_QUANTITY"))("placeholder",l(94,137,"SUPPLIER_PROFILE.MINIMUM_ORDER_PLACEHOLDER"))("fullWidth",!0)("required",!0),r(7),f(" ",l(100,139,"SUPPLIER_PROFILE.PRODUCT_CATEGORIES")," "),r(3),f(" ",l(103,141,"SUPPLIER_PROFILE.CATEGORIES_DESCRIPTION")," "),r(3),p("ngForOf",i.categoryOptions),r(3),F(" ",l(109,143,"SUPPLIER_PROFILE.SELECTED_CATEGORIES"),": ",i.selectedCategories.length,"/5 "),r(2),p("ngIf",i.selectedCategories.length===0),r(),p("ngIf",i.selectedCategories.length>0),r(2),p("label",l(114,145,"SUPPLIER_PROFILE.CANCEL")),r(2),p("label",l(116,147,i.isEditMode?"SUPPLIER_PROFILE.UPDATE_PROFILE":"SUPPLIER_PROFILE.CREATE_PROFILE"))("loading",i.isSaving)("disabled",i.form.invalid||i.selectedCategories.length===0)}}var te=class c{constructor(e,t,i,s,O,R){this.fb=e;this.supplierService=t;this.authService=i;this.translate=s;this.router=O;this.http=R}form;isLoading=!1;isSaving=!1;isEditMode=!1;currentUser=null;supplierProfile=new h({});selectedFile=null;previewUrl="";logoUrl="";specializationOptions=[];categoryOptions=[];countries=[];cities=[];loadingCities=!1;selectedCategories=[];notification={show:!1,message:"",type:"success"};destroy$=new x;ngOnInit(){this.loadCountries(),this.loadTranslatedLists(),this.initForm(),this.loadUserData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCountries(){this.http.get("https://countriesnow.space/api/v0.1/countries").subscribe({next:e=>{e.data&&Array.isArray(e.data)&&(this.countries=e.data.map(t=>({label:t.country,value:t.country})))},error:e=>{console.error("Error al cargar pa\xEDses:",e)}})}loadCitiesByCountry(e){this.loadingCities=!0,this.http.post("https://countriesnow.space/api/v0.1/countries/cities",{country:e}).subscribe({next:t=>{this.loadingCities=!1,t.data&&Array.isArray(t.data)&&(this.cities=t.data.map(i=>({label:i,value:i})))},error:t=>{this.loadingCities=!1,console.error("Error al cargar ciudades:",t),this.cities=[]}})}initForm(){this.form=this.fb.group({companyName:["",m.required],ruc:["",[m.required,m.pattern(/^\d{11}$/)]],specialization:["",m.required],yearsFounded:[new Date().getFullYear()],warehouseLocation:["",m.required],minimumOrderQuantity:[1,[m.required,m.min(1)]],fullName:["",m.required],email:["",[m.required,m.email]],country:["",m.required],city:["",m.required],address:[""],phone:[""]}),this.form.get("country")?.valueChanges.subscribe(e=>{e?this.loadCitiesByCountry(e):this.cities=[],this.form.get("city")?.setValue("")})}loadTranslatedLists(){this.specializationOptions=[{value:"cotton",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.COTTON")},{value:"polyester",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.POLYESTER")},{value:"wool",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.WOOL")},{value:"silk",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.SILK")},{value:"linen",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.LINEN")},{value:"blends",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.BLENDS")},{value:"technical",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.TECHNICAL")},{value:"sustainable",label:this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATIONS.SUSTAINABLE")}],this.categoryOptions=[{value:"basic_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.BASIC_FABRICS")},{value:"premium_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.PREMIUM_FABRICS")},{value:"sports_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.SPORTS_FABRICS")},{value:"home_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.HOME_FABRICS")},{value:"industrial_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.INDUSTRIAL_FABRICS")},{value:"textile_accessories",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.TEXTILE_ACCESSORIES")},{value:"threads_fibers",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.THREADS_FIBERS")},{value:"printed_fabrics",label:this.translate.instant("SUPPLIER_PROFILE.CATEGORIES.PRINTED_FABRICS")}],this.translate.onLangChange.pipe(U(this.destroy$)).subscribe(()=>{this.loadTranslatedLists()})}loadUserData(){if(this.isLoading=!0,this.currentUser=this.authService.getCurrentUser(),!this.currentUser){this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_ERROR"),"error"),this.router.navigate(["/login"]);return}this.loadSupplierProfile()}loadSupplierProfile(){this.supplierService.getProfileById(this.currentUser.id).subscribe({next:e=>{if(e){this.supplierProfile=new h(e),this.logoUrl=e.logo||"",this.previewUrl=this.logoUrl,this.selectedCategories=e.productCategories||[],this.isEditMode=!0,this.form.patchValue({companyName:e.companyName||"",ruc:e.ruc||"",specialization:e.specialization||"",yearsFounded:e.yearsFounded||new Date().getFullYear(),warehouseLocation:e.warehouseLocation||"",minimumOrderQuantity:e.minimumOrderQuantity||1,fullName:e.name||this.currentUser?.name||"",email:e.email||this.currentUser?.email||"",country:e.country||this.currentUser?.country||"",city:e.city||this.currentUser?.city||"",address:e.address||this.currentUser?.address||"",phone:e.phone||this.currentUser?.phone||""});let t=e.country||this.currentUser?.country;t&&this.loadCitiesByCountry(t)}else this.supplierProfile=new h({id:this.currentUser.id,name:this.currentUser.name,email:this.currentUser.email,role:"supplier",country:this.currentUser.country,city:this.currentUser.city,address:this.currentUser.address,phone:this.currentUser.phone,yearsFounded:new Date().getFullYear()}),this.isEditMode=!1,this.form.patchValue({fullName:this.currentUser?.name||"",email:this.currentUser?.email||"",country:this.currentUser?.country||"",city:this.currentUser?.city||"",address:this.currentUser?.address||"",phone:this.currentUser?.phone||""}),this.currentUser?.country&&this.loadCitiesByCountry(this.currentUser.country);this.isLoading=!1},error:e=>{console.error("Error al cargar perfil:",e),this.supplierProfile=new h({id:this.currentUser.id,name:this.currentUser.name,email:this.currentUser.email,role:"supplier",country:this.currentUser.country,city:this.currentUser.city,address:this.currentUser.address,phone:this.currentUser.phone,yearsFounded:new Date().getFullYear()}),this.form.patchValue({fullName:this.currentUser?.name||"",email:this.currentUser?.email||"",country:this.currentUser?.country||"",city:this.currentUser?.city||"",address:this.currentUser?.address||"",phone:this.currentUser?.phone||""}),this.currentUser?.country&&this.loadCitiesByCountry(this.currentUser.country),this.isEditMode=!1,this.isLoading=!1}})}triggerFileInput(){let e=document.querySelector('input[type="file"]');e&&e.click()}onFileSelected(e){let t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/")){this.showNotification(this.translate.instant("SUPPLIER_PROFILE.INVALID_IMAGE_TYPE"),"warning"),e.target.value="";return}if(t.size>5*1024*1024){this.showNotification(this.translate.instant("SUPPLIER_PROFILE.IMAGE_TOO_LARGE"),"warning"),e.target.value="";return}this.selectedFile=t;let i=new FileReader;i.onload=s=>{this.previewUrl=s.target.result},i.readAsDataURL(t),e.target.value=""}removeImage(){this.selectedFile=null,this.previewUrl="",this.logoUrl="",this.supplierProfile.logo=""}uploadImage(){return L(this,null,function*(){return this.selectedFile?new Promise(e=>{setTimeout(()=>{let i=this.form.getRawValue().companyName||"Company",s=`https://via.placeholder.com/300x300/a68b6b/ffffff?text=${encodeURIComponent(i)}`;e(s)},1e3)}):this.logoUrl})}toggleCategory(e){let t=this.selectedCategories.indexOf(e);if(t>-1)this.selectedCategories.splice(t,1);else if(this.selectedCategories.length<5)this.selectedCategories.push(e);else{this.showNotification(this.translate.instant("SUPPLIER_PROFILE.MAX_CATEGORIES"),"warning");return}}isCategorySelected(e){return this.selectedCategories.includes(e)}getSpecializationLabel(e){let t=this.specializationOptions.find(i=>i.value===e);return t?t.label:e}getCategoryLabel(e){let t=this.categoryOptions.find(i=>i.value===e);return t?t.label:e}validateForm(){let e=this.form.getRawValue();if(!e.companyName?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.COMPANY_NAME_REQUIRED"),"warning"),!1;if(!e.ruc?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.RUC_REQUIRED"),"warning"),!1;if(!e.specialization?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.SPECIALIZATION_REQUIRED"),"warning"),!1;if(!e.fullName?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.FULL_NAME_REQUIRED"),"warning"),!1;if(!e.email?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.EMAIL_REQUIRED"),"warning"),!1;if(!e.country?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.COUNTRY_REQUIRED"),"warning"),!1;if(!e.city?.trim())return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.CITY_REQUIRED"),"warning"),!1;if(this.selectedCategories.length===0)return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.CATEGORIES_REQUIRED"),"warning"),!1;if(e.ruc&&!/^\d{11}$/.test(e.ruc))return this.showNotification(this.translate.instant("SUPPLIER_PROFILE.INVALID_RUC"),"warning"),!1;let t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email&&!t.test(e.email)?(this.showNotification(this.translate.instant("SUPPLIER_PROFILE.INVALID_EMAIL"),"warning"),!1):!0}saveProfile(){return L(this,null,function*(){if(!this.form.valid||!this.validateForm()||this.isSaving){this.form.markAllAsTouched();return}this.isSaving=!0;try{let e=this.form.getRawValue();this.supplierProfile.companyName=e.companyName,this.supplierProfile.ruc=e.ruc,this.supplierProfile.specialization=e.specialization,this.supplierProfile.productCategories=[...this.selectedCategories],this.supplierProfile.yearsFounded=e.yearsFounded,this.supplierProfile.warehouseLocation=e.warehouseLocation,this.supplierProfile.minimumOrderQuantity=e.minimumOrderQuantity,this.supplierProfile.name=e.fullName,this.supplierProfile.email=e.email,this.supplierProfile.country=e.country,this.supplierProfile.city=e.city,this.supplierProfile.address=e.address,this.supplierProfile.phone=e.phone,this.selectedFile&&(this.supplierProfile.logo=yield this.uploadImage()),this.isEditMode?this.supplierService.updateProfile(this.supplierProfile.id,this.supplierProfile).subscribe({next:t=>{console.log("\u2705 Supplier profile updated:",t);let i={id:this.currentUser.id,name:e.fullName,email:e.email,country:e.country,city:e.city,address:e.address,phone:e.phone,password:this.currentUser.password,role:this.currentUser.role};this.authService.updateUser(this.currentUser.id,i).subscribe({next:s=>{console.log("\u2705 User data updated:",s),this.authService.setCurrentUser(s),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_UPDATED_SUCCESS"),"success"),this.supplierProfile=new h(t),this.logoUrl=t.logo||"",this.selectedFile=null,this.isSaving=!1},error:s=>{console.error("\u274C Error updating user data:",s),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.USER_UPDATE_ERROR"),"warning"),this.supplierProfile=new h(t),this.logoUrl=t.logo||"",this.selectedFile=null,this.isSaving=!1}})},error:t=>{console.error("\u274C Error updating supplier profile:",t),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}}):this.supplierService.createProfile(this.currentUser.id).subscribe({next:t=>{let i=new h(S(S({},t),this.supplierProfile));this.supplierService.updateProfile(t.id,i).subscribe({next:s=>{console.log("\u2705 New supplier profile created:",s);let O={id:this.currentUser.id,name:e.fullName,email:e.email,country:e.country,city:e.city,address:e.address,phone:e.phone,password:this.currentUser.password,role:this.currentUser.role};this.authService.updateUser(this.currentUser.id,O).subscribe({next:R=>{console.log("\u2705 User data updated:",R),this.authService.setCurrentUser(R),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_CREATED_SUCCESS"),"success"),this.supplierProfile=new h(s),this.logoUrl=s.logo||"",this.selectedFile=null,this.isEditMode=!0,this.isSaving=!1},error:R=>{console.error("\u274C Error updating user data:",R),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.USER_UPDATE_ERROR"),"warning"),this.supplierProfile=new h(s),this.logoUrl=s.logo||"",this.selectedFile=null,this.isEditMode=!0,this.isSaving=!1}})},error:s=>{console.error("\u274C Error completing supplier profile:",s),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})},error:t=>{console.error("\u274C Error creating supplier profile:",t),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})}catch(e){console.error("\u274C Error processing profile:",e),this.showNotification(this.translate.instant("SUPPLIER_PROFILE.PROFILE_ERROR"),"error"),this.isSaving=!1}})}goBack(){this.router.navigate(["/supplier"])}showNotification(e,t){this.notification={show:!0,message:e,type:t}}closeNotification(){this.notification.show=!1}get fullName(){return this.form.get("fullName")}get email(){return this.form.get("email")}get country(){return this.form.get("country")}get city(){return this.form.get("city")}get address(){return this.form.get("address")}get phone(){return this.form.get("phone")}get companyName(){return this.form.get("companyName")}get ruc(){return this.form.get("ruc")}get specialization(){return this.form.get("specialization")}get yearsFounded(){return this.form.get("yearsFounded")}get warehouseLocation(){return this.form.get("warehouseLocation")}get minimumOrderQuantity(){return this.form.get("minimumOrderQuantity")}static \u0275fac=function(t){return new(t||c)(v(j),v($),v(K),v(B),v(V),v(k))};static \u0275cmp=w({type:c,selectors:[["app-supplier-profile-configuration"]],decls:16,vars:15,consts:[["fileInput",""],[1,"profile-container"],[1,"profile-header"],[1,"header-content"],["variant","secondary","size","small",3,"click","label"],[1,"material-icons"],[1,"header-subtitle"],["class","loading-container",4,"ngIf"],["class","profile-form-container",4,"ngIf"],[3,"close","show","message","type","autoClose"],[1,"loading-container"],[1,"loading-spinner"],[1,"profile-form-container"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"logo-upload-section"],[1,"logo-preview"],[1,"logo-container",3,"click"],["class","logo-image",3,"src","alt",4,"ngIf"],["class","logo-placeholder",4,"ngIf"],["class","logo-overlay",4,"ngIf"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","logo-actions",4,"ngIf"],[1,"upload-instructions"],[1,"form-grid"],[1,"form-group"],["type","text","formControlName","fullName",3,"label","placeholder","fullWidth","required"],["type","email","formControlName","email",3,"label","placeholder","fullWidth","required"],["type","select","formControlName","country",3,"label","placeholder","options","fullWidth","required"],["type","select","formControlName","city",3,"label","placeholder","options","fullWidth","required","disabled"],[1,"form-group","full-width"],["type","text","formControlName","address",3,"label","placeholder","fullWidth"],["type","tel","formControlName","phone",3,"label","placeholder","fullWidth"],["type","text","formControlName","companyName",3,"label","placeholder","fullWidth","required"],["type","text","formControlName","ruc",3,"label","placeholder","fullWidth","required"],["type","select","formControlName","specialization",3,"label","placeholder","options","fullWidth","required"],["type","number","formControlName","yearsFounded",3,"label","placeholder","fullWidth","required"],["type","text","formControlName","warehouseLocation",3,"label","placeholder","fullWidth","required"],["type","number","formControlName","minimumOrderQuantity",3,"label","placeholder","fullWidth","required"],[1,"section-description"],[1,"categories-grid"],["class","category-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"categories-info"],[1,"categories-count"],["class","error-message",4,"ngIf"],["class","selected-categories",4,"ngIf"],[1,"form-actions"],["type","button","variant","secondary",3,"click","label"],["type","button","variant","primary","icon","save",3,"click","label","loading","disabled"],[1,"logo-image",3,"src","alt"],[1,"logo-placeholder"],[1,"logo-overlay"],[1,"logo-actions"],["type","button","variant","primary","size","small","icon","delete",3,"click","label"],[1,"category-item",3,"click"],[1,"category-label"],[1,"error-message"],[1,"selected-categories"],[1,"selected-tags"],["class","category-tag",4,"ngFor","ngForOf"],[1,"category-tag"],["type","button",1,"remove-tag",3,"click"]],template:function(t,i){t&1&&(o(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-button",4),a(4,"translate"),P("click",function(){return i.goBack()}),n(),o(5,"h1")(6,"span",5),d(7,"store"),n(),d(8),a(9,"translate"),n(),o(10,"p",6),d(11),a(12,"translate"),n()()(),I(13,ie,5,3,"div",7)(14,de,117,149,"div",8),o(15,"app-notification",9),P("close",function(){return i.closeNotification()}),n()()),t&2&&(r(3),p("label",l(4,9,"SUPPLIER_PROFILE.GO_BACK")),r(5),f(" ",l(9,11,i.isEditMode?"SUPPLIER_PROFILE.EDIT_TITLE":"SUPPLIER_PROFILE.CREATE_TITLE")," "),r(3),C(l(12,13,"SUPPLIER_PROFILE.SUBTITLE")),r(2),p("ngIf",i.isLoading),r(),p("ngIf",!i.isLoading),r(),p("show",i.notification.show)("message",i.notification.message)("type",i.notification.type)("autoClose",!0))},dependencies:[T,A,N,Z,Y,q,G,Q,W,H,z,D,J,X,ee],styles:['.profile-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--background-color) 0%,#f1f5f9 100%);padding:24px}.profile-header[_ngcontent-%COMP%]{background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);margin-bottom:24px;overflow:hidden;position:relative}.profile-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-color),var(--primary-dark))}.header-content[_ngcontent-%COMP%]{padding:32px;display:flex;flex-direction:column;gap:8px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;color:var(--text-dark);line-height:1.2}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:#a68b6b;background:#a68b6b1a;padding:.5rem;border-radius:12px}.header-subtitle[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--text-light);font-weight:400}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:#fff;border-radius:16px;box-shadow:0 8px 32px #0000001a;border:1px solid #e0e6ed}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f3f3f3;border-top:4px solid #a68b6b;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1.1rem;margin:0}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 8px 32px #0000001a;border:1px solid #e0e6ed;transition:all .3s ease;animation:_ngcontent-%COMP%_slideInUp .5s ease-out}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 12px 48px #00000026;border-color:#d0d7de}.section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;color:#2c3e50;margin:0 0 2rem;padding-bottom:1rem;border-bottom:2px solid #f1f3f4;display:flex;align-items:center;gap:.75rem}.section-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#a68b6b;font-size:2rem;background:#a68b6b1a;padding:.5rem;border-radius:10px}.section-description[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin-bottom:1.5rem;line-height:1.6}.logo-upload-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:40px;align-items:center}.logo-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.logo-container[_ngcontent-%COMP%]{width:200px;height:200px;border:3px dashed var(--border-color);border-radius:var(--border-radius);display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--background-color);transition:var(--transition);position:relative;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.logo-container[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:var(--primary-light);transform:scale(1.03);box-shadow:var(--shadow-md)}.logo-container[_ngcontent-%COMP%]:active{transform:scale(.98)}.logo-container.has-image[_ngcontent-%COMP%]{border-style:solid;border-color:var(--primary-color);background:transparent;box-shadow:var(--shadow-sm)}.logo-container.has-image[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg);border-color:var(--primary-dark)}.logo-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:calc(var(--border-radius) - 3px);transition:var(--transition)}.logo-container.has-image[_ngcontent-%COMP%]:hover   .logo-image[_ngcontent-%COMP%]{transform:scale(1.02)}.logo-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:var(--text-muted);text-align:center;padding:20px;pointer-events:none;transition:var(--transition)}.logo-container[_ngcontent-%COMP%]:hover   .logo-placeholder[_ngcontent-%COMP%]{color:var(--primary-color);transform:translateY(-2px)}.logo-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:56px;opacity:.6;transition:var(--transition)}.logo-container[_ngcontent-%COMP%]:hover   .logo-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:600;letter-spacing:.5px}.logo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:1rem;font-weight:500}.logo-hint[_ngcontent-%COMP%]{font-size:14px;color:var(--text-light);text-align:center;font-style:italic;margin-top:8px;opacity:.8}.logo-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;color:#fff;opacity:0;transition:opacity .3s ease;border-radius:12px}.logo-container.has-image[_ngcontent-%COMP%]:hover   .logo-overlay[_ngcontent-%COMP%]{opacity:1}.logo-overlay[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:2rem}.logo-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:.9rem;font-weight:500}.logo-hint[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin-top:1rem}.upload-instructions[_ngcontent-%COMP%]{background:var(--primary-light);padding:24px;border-radius:var(--border-radius-sm);border-left:4px solid var(--primary-color);max-width:400px}.upload-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:600;color:var(--text-dark);font-size:16px}.upload-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:var(--text-light);list-style-type:none;position:relative}.upload-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px;padding-left:20px;position:relative;line-height:1.4}.upload-instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";position:absolute;left:0;color:var(--primary-color);font-weight:700;font-size:12px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin-bottom:.5rem;font-size:1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.875rem 1rem;border:2px solid #e0e6ed;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#fff;color:#2c3e50}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#a68b6b;box-shadow:0 0 0 3px #a68b6b1a}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#6c757d}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.5rem;font-weight:500}.categories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;margin-bottom:2rem}.category-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border:2px solid #e0e6ed;border-radius:12px;cursor:pointer;transition:all .3s ease;background:#f8f9fa}.category-item[_ngcontent-%COMP%]:hover{border-color:#a68b6b;background:#a68b6b0d;transform:translateY(-1px);box-shadow:0 4px 12px #a68b6b26}.category-item.selected[_ngcontent-%COMP%]{border-color:#a68b6b;background:#a68b6b1a;color:#2c3e50}.category-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#6c757d;transition:color .3s ease}.category-item.selected[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#a68b6b}.category-label[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.categories-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:1rem;background:#f8f9fa;border-radius:10px;border:1px solid #e0e6ed}.categories-count[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1rem}.selected-categories[_ngcontent-%COMP%]{background:#a68b6b0d;border:1px solid rgba(166,139,107,.2);border-radius:12px;padding:1.5rem;margin-top:1.5rem}.selected-categories[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2c3e50;font-size:1.1rem;font-weight:600}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.category-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:#a68b6b;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:500;transition:all .3s ease}.category-tag[_ngcontent-%COMP%]:hover{background:#8a7556;transform:translateY(-1px);box-shadow:0 4px 12px #a68b6b4d}.remove-tag[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;transition:background-color .3s ease}.remove-tag[_ngcontent-%COMP%]:hover{background:#fff3}.remove-tag[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;padding:24px 32px;background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-md);border:1px solid var(--border-color);margin-top:8px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa}.profile-header[_ngcontent-%COMP%]{padding:2rem 1.5rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;flex-direction:column;text-align:center;gap:.5rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:2.5rem}.header-subtitle[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.form-section[_ngcontent-%COMP%]{padding:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;flex-direction:column;text-align:center;gap:.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.logo-container[_ngcontent-%COMP%]{width:150px;height:150px}.categories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.categories-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}.selected-tags[_ngcontent-%COMP%]{justify-content:center}.upload-instructions[_ngcontent-%COMP%]{padding:1rem}.upload-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1rem}}@media (max-width: 480px){.profile-container[_ngcontent-%COMP%]{padding:.5rem;background:#f8f9fa}.profile-header[_ngcontent-%COMP%]{padding:1.5rem 1rem;margin-bottom:1rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:2rem}.form-section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.3rem}.logo-container[_ngcontent-%COMP%]{width:120px;height:120px}.form-actions[_ngcontent-%COMP%]{padding:1.5rem 1rem}.upload-instructions[_ngcontent-%COMP%]{padding:1rem;margin-top:1rem}.category-item[_ngcontent-%COMP%]{padding:.75rem 1rem}.selected-categories[_ngcontent-%COMP%]{padding:1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .5s ease-out}.logo-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .6s ease-out}.logo-container[_ngcontent-%COMP%]:focus-within{outline:3px solid #a68b6b;outline-offset:3px}.category-item[_ngcontent-%COMP%]:focus{outline:2px solid #a68b6b;outline-offset:2px}.remove-tag[_ngcontent-%COMP%]:focus{outline:2px solid white;outline-offset:1px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:invalid{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:valid{border-color:#28a745}.category-item[_ngcontent-%COMP%]:hover   .category-label[_ngcontent-%COMP%]{color:#a68b6b;font-weight:600}.form-section[_ngcontent-%COMP%]:hover   .section-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{transform:scale(1.1);background:#a68b6b26}.form-actions[_ngcontent-%COMP%]   app-button[loading=true][_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.selected-categories[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.selected-categories[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.selected-categories[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#a68b6b;border-radius:4px}.selected-categories[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8a7556}']})};export{te as SupplierProfileConfigurationComponent};
