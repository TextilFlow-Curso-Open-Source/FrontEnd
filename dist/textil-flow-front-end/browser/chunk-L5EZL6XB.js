import{v as d,w as l}from"./chunk-Z3ABZYYA.js";import{i as g,j as m}from"./chunk-GNQ3TXIC.js";import{Z as u,ca as c,s}from"./chunk-LJ6G2VOH.js";var n=class extends d{companyName;ruc;specialization;productCategories;yearsFounded;warehouseLocation;minimumOrderQuantity;logo;averageRating;totalReviews;constructor(t){super(t),this.companyName=t.companyName||"",this.ruc=t.ruc||"",this.specialization=t.specialization||"",this.productCategories=t.productCategories||[],this.yearsFounded=t.yearsFounded||new Date().getFullYear(),this.warehouseLocation=t.warehouseLocation||"",this.minimumOrderQuantity=t.minimumOrderQuantity||0,this.logo=t.logo||"",this.averageRating=t.averageRating||0,this.totalReviews=t.totalReviews||0}};var p=class o extends m{constructor(r){super();this.authService=r;this.resourceEndpoint=g.supplierEndpointPath}createProfile(r){let e=this.authService.getCurrentUser();if(console.log("Usuario actual obtenido en SupplierService:",e),console.log("UserID esperado:",r),!e)throw console.error("No hay usuario autenticado en el sistema"),new Error("No hay usuario autenticado en el sistema");if(e.id!==r&&(console.warn(`ID de usuario no coincide. Actual: ${e.id}, Esperado: ${r}`),!e.id))throw new Error("El usuario actual no tiene ID asignado");let i=new n({id:e.id,name:e.name,email:e.email,password:e.password,role:"supplier",country:e.country,city:e.city,address:e.address,phone:e.phone,companyName:"",ruc:"",specialization:"",productCategories:[],yearsFounded:new Date().getFullYear(),warehouseLocation:"",minimumOrderQuantity:0,logo:"",averageRating:0,totalReviews:0});return console.log("Supplier a crear:",i),this.create(i)}getAllSuppliers(){return this.getAll()}getProfileByEmail(r){return this.getAll().pipe(s(e=>e.find(i=>i.email===r)))}getProfileById(r){return this.getById(r)}getProfileByUserId(r){return this.getProfileById(r)}updateProfile(r,e){return this.update(r,e)}updateSupplierRating(r,e,i){return this.getById(r).pipe(s(a=>(a.averageRating=e,a.totalReviews=i,a)))}static \u0275fac=function(e){return new(e||o)(c(l))};static \u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a,p as b};
