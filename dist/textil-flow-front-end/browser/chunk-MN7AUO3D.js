import{Z as m,k as r}from"./chunk-ZUXVFBKG.js";var o=class i{THEME_KEY="user-theme-preference";themeSubject=new r("auto");activeThemeSubject=new r("light");theme$=this.themeSubject.asObservable();activeTheme$=this.activeThemeSubject.asObservable();mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");constructor(){this.initializeTheme(),this.setupSystemThemeListener()}initializeTheme(){let e=localStorage.getItem(this.THEME_KEY);e&&this.isValidTheme(e)?this.setTheme(e,!1):this.setTheme("auto",!0)}setupSystemThemeListener(){this.mediaQuery.addEventListener("change",e=>{this.themeSubject.value==="auto"&&this.updateActiveTheme("auto")})}setTheme(e,t=!0){console.log(`\u{1F3A8} Cambiando tema a: ${e}`),this.themeSubject.next(e),this.updateActiveTheme(e),t&&localStorage.setItem(this.THEME_KEY,e)}updateActiveTheme(e){let t;switch(e){case"light":t="light";break;case"dark":t="dark";break;case"auto":t=this.mediaQuery.matches?"dark":"light";break}console.log(`\u{1F313} Tema activo: ${t}`),this.activeThemeSubject.next(t),this.applyThemeToDOM(t)}applyThemeToDOM(e){let t=document.head,a=t.querySelector('link[href*="light-theme"]'),s=t.querySelector('link[href*="dark-theme"]');a&&a.remove(),s&&s.remove();let h=document.createElement("link");h.rel="stylesheet",h.href=e==="dark"?"dark-theme.css":"light-theme.css",t.appendChild(h),document.body.setAttribute("data-theme",e),document.body.classList.remove("light-theme","dark-theme"),document.body.classList.add(`${e}-theme`)}getCurrentTheme(){return this.themeSubject.value}getCurrentActiveTheme(){return this.activeThemeSubject.value}toggleTheme(){let t=this.getCurrentTheme()==="light"?"dark":"light";this.setTheme(t)}syncFromConfiguration(e){this.isValidTheme(e)&&this.setTheme(e,!0)}getThemeForConfiguration(){return this.getCurrentTheme()}isValidTheme(e){return["light","dark","auto"].includes(e)}getSystemPreference(){return this.mediaQuery.matches?"dark":"light"}getDebugInfo(){return{selectedMode:this.getCurrentTheme(),activeTheme:this.getCurrentActiveTheme(),systemPrefers:this.getSystemPreference(),savedInStorage:localStorage.getItem(this.THEME_KEY)}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})};export{o as a};
